System.register("bundle://common/_virtual/ActionQueueDispatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Helper.ts","./BasicDispatcher.ts"],(function(t){var i,e,n,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t._decorator},function(t){n=t.Helper},function(t){c=t.BasicDispatcher}],execute:function(){var s,u=e.ccclass;t("ActionQueueDispatcher",u("ActionQueueDispatcher")(s=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return(i=t.call.apply(t,[this].concat(n))||this).__actionQueue=[],i}i(e,t);var c=e.prototype;return c.dispatch=function(i){if(this.isDispatching()&&this.__actionQueue){if(this.__actionQueue.length){var e=this.__actionQueue[this.__actionQueue.length-1];if(n.areEqual(e,i))return}this.__actionQueue.push(i)}else t.prototype.dispatch.call(this,i)},c._stopDispatching=function(){t.prototype._stopDispatching.call(this),this._dispatchQueueActions()},c._dispatchQueueActions=function(){if(this.__actionQueue&&this.__actionQueue.length){var t=this.__actionQueue.shift();this.dispatch(t)}},c.destroy=function(){t.prototype.destroy.call(this),this.__actionQueue=null},e}(c))||s)}}}));

System.register("bundle://common/_virtual/ActionStoreDispatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionQueueDispatcher.ts"],(function(t){var e,r,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t._decorator,o=t.log},function(t){s=t.ActionQueueDispatcher}],execute:function(){var i,n=r.ccclass;t("ActionStoreDispatcher",n("ActionStoreDispatcher")(i=function(t){function r(){for(var e,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this)._storeMapper=new Map,e._actionStores=new Map,e._orderConnectorList=new Map,e}e(r,t);var s=r.prototype;return s._excuteCallback=function(e){var r;if(null==(r=this._actionStores)||!r.has(e)){if(this._storeMapper&&this._storeMapper.has(e)){var o=this._storeMapper.get(e);if(o&&"string"!=typeof o&&(o=o()),this._actionStores.has(o))if(this._callbacks[o](this._pendingAction,this.findMapName(e),this._callbacks[e]))return}t.prototype._excuteCallback.call(this,e)}},s.mapToken=function(e,r){var o=this,s=t.prototype.mapToken.call(this,e,r);return this._orderConnectorList.forEach((function(t,e){t&&o.isSameName(e,s)&&t(!0)})),s},s.dispatch=function(e){var r=this._validateIds([e.sender])[0];if(r&&this._storeMapper.has(r)){var o=this._storeMapper.get(r);if(this._actionStores.has(o)){var s=this._actionStores.get(o);s&&s(e)}}t.prototype.dispatch.call(this,e)},s.destroy=function(){this._orderConnectorList.clear(),this._orderConnectorList=null,t.prototype.destroy.call(this)},s.connectStore=function(t,e,r){var s=this,i=this.searchAllRegisterNames(e);o("Cac store ket noi voi "+t+" la : "+i+" ( "+e+" ) "),i.forEach((function(e){var o=s._validateIds([t,e]),i=o[0];if(i){s._actionStores.has(i)||s._actionStores.set(i,r);var n=o[1];n&&!s._storeMapper.has(n)&&s._storeMapper.set(n,i)}})),this._orderConnectorList.has(e)||this._orderConnectorList.set(e,(function(o){return o&&s.connectStore(t,e,r),t}))},s.disconnectStore=function(t){for(var e=this,r=this._validateIds([t])[0],o=this._storeMapper.entries(),s=o.next().value,i=function(){if(s[0]==r)e._storeMapper.delete(s[0]),e._actionStores.has(r)&&e._actionStores.delete(r);else{var t=s[1];"string"==typeof t&&t==r&&(e._storeMapper.delete(s[0]),e._orderConnectorList.forEach((function(r,o){var s=r();s&&e.findMapName(s)==t&&e._orderConnectorList.delete(o)})),e._actionStores.has(r)&&e._actionStores.delete(r))}s=o.next().value};s&&s.length;)i()},s.isSameName=function(t,e){return-1!=e.split(/\<|\>/).indexOf(t)},r}(s))||i)}}}));

System.register("bundle://common/_virtual/AsyncWaitify.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,r,e,i;return{setters:[function(n){t=n.inheritsLoose,r=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){i=n._decorator}],execute:function(){n("AsyncWaitify",(function(n){return function(n){function i(){for(var t,r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];return(t=n.call.apply(n,[this].concat(e))||this)._waitingHandler=[],t}t(i,n);var a=i.prototype;return a.waitForReady=function(){var n=r(e().mark((function n(){var t=this;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._waitingHandler){n.next=3;break}return n.next=3,new Promise((function(n){t._waitingHandler.push(n)}));case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a.ready=function(n){if(this._waitingHandler&&this._waitingHandler.length)for(;this._waitingHandler.length;){this._waitingHandler.shift()(n)}this._waitingHandler=null},i}(n)}));i.ccclass,i.property}}}));

System.register("bundle://common/_virtual/AudioConfig.ts",["cc"],(function(_){var S;return{setters:[function(_){S=_.Enum}],execute:function(){var i=_("AUDIO_LIST",function(_){return _[_.BGM_BigWin_Main=0]="BGM_BigWin_Main",_[_.BGM_BigWin_Outro=1]="BGM_BigWin_Outro",_[_.BGM_FS=2]="BGM_FS",_[_.BGM_MegaWin_Main=3]="BGM_MegaWin_Main",_[_.BGM_MegaWin_Outro=4]="BGM_MegaWin_Outro",_[_.BGM_MG=5]="BGM_MG",_[_.BGM_SuperWin_Main=6]="BGM_SuperWin_Main",_[_.BGM_SuperWin_Outro=7]="BGM_SuperWin_Outro",_[_.BGM_TotalWin_Main=8]="BGM_TotalWin_Main",_[_.BGM_TotalWin_Outro=9]="BGM_TotalWin_Outro",_[_.BGM_Win_Intro=10]="BGM_Win_Intro",_[_.AMB_Jungle=11]="AMB_Jungle",_[_.sfx_autospin_special_round=12]="sfx_autospin_special_round",_[_.SFX_FSStartPg=13]="SFX_FSStartPg",_[_.SFX_HyperReel=14]="SFX_HyperReel",_[_.sfx_Money_Down=15]="sfx_Money_Down",_[_.sfx_Money_Up=16]="sfx_Money_Up",_[_.SFX_Multiplier=17]="SFX_Multiplier",_[_.SFX_PrizeBannerCount=18]="SFX_PrizeBannerCount",_[_.SFX_PrizeInfoBarCount=19]="SFX_PrizeInfoBarCount",_[_.SFX_PrizeSmallWin=20]="SFX_PrizeSmallWin",_[_.SFX_PrizeTotalWin=21]="SFX_PrizeTotalWin",_[_.SFX_ReelSpin=22]="SFX_ReelSpin",_[_.SFX_ReelStopFst=23]="SFX_ReelStopFst",_[_.SFX_ReelStopNrm=24]="SFX_ReelStopNrm",_[_.SFX_Scatter=25]="SFX_Scatter",_[_.SFX_SpinButton=26]="SFX_SpinButton",_[_.SFX_SymDrop=27]="SFX_SymDrop",_[_.SFX_SymShuffleGlow=28]="SFX_SymShuffleGlow",_[_.SFX_SymSingleShuffle=29]="SFX_SymSingleShuffle",_[_.SFX_UICollect=30]="SFX_UICollect",_[_.SFX_UIGeneric=31]="SFX_UIGeneric",_[_.SFX_UIStart=32]="SFX_UIStart",_[_.SFX_Wild=33]="SFX_Wild",_[_.SFX_WinMedal=34]="SFX_WinMedal",_[_.SFX_WinSymHighlight=35]="SFX_WinSymHighlight",_[_.SFX_WinSymHighlightBeep=36]="SFX_WinSymHighlightBeep",_[_.SFX_WinSymHilight=37]="SFX_WinSymHilight",_[_.SFX_WinSymSingleHighlight=38]="SFX_WinSymSingleHighlight",_[_.SFX_WinSymSparkleDisappear=39]="SFX_WinSymSparkleDisappear",_}({}));S(i)}}}));

System.register("bundle://common/_virtual/AudioReference.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtils.ts","./Helper.ts"],(function(e){var t,i,r,o,n,s,u,l,a,c,p,h,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){s=e._decorator,u=e.Enum,l=e.AudioSource,a=e.error,c=e.js,p=e.math,h=e.Component},function(e){f=e.GameUtils},function(e){d=e.Helper}],execute:function(){var y,m,v,_,g,b,A,O,N,k,D,M,U;e("audio",(function e(t,i,r){var o=null;function n(e,t,i){var r,n,s,a=e.constructor,p=t.toString(),h=S+p,y=j+p,m=I+p,v=a[z]||(a[z]={}),_=v.proto||(v.proto={}),g=_.properties||(_.properties={}),b=null!=(r=g[h])?r:g[h]={},A=null!=(n=g[y])?n:g[y]={},O=null!=(s=g[m])?s:g[m]={},N=H.ENUM,k={type:N,group:"AUDIO",displayName:""+p.replace(/\b\w/g,(function(e){return e.toUpperCase()})).replace(/(?=[A-Z])/g," ")},D=c.mixin(b,k),M=(c.mixin(A,{serializable:!0,visible:!1}),c.mixin(O,{serializable:!0,visible:!1}));o?c.isString(o)?(M.default=o,M.displayName=""+d.upperCaseFirstCharacter(p),M.visible=!0,M.readonly=!0,M.group="AUDIO",M.tooltip='"'+o.toString()+'" key is fixed in your code',Object.defineProperty(e,m,{get:function(){return o},set:function(e){this[y]=-1}})):u.isEnum(o)&&(N=u(o),D.visible=!0,D.type=N,Object.defineProperty(e,h,{get:function(){return this[y]&&-1!=this[y]?this[y]:N[this[m]]},set:function(e){this[y]=e,e!==N.UNKNOW_AUDIO?this[m]=N[e]:f.updateEnum(this,h,N)}})):(D.visible=!0,D.displayName=""+d.upperCaseFirstCharacter(p),Object.defineProperty(e,h,{get:function(){return this[y]&&-1!=this[y]?this[y]:H.ENUM[this[m]]},set:function(e){this[y]=e,e!==H.ENUM.UNKNOW_AUDIO?this[m]=H.ENUM[e]:f.updateEnum(this,h,H.ENUM)}}));var U,E=a[K]||(a[K]=[]);-1==E.indexOf(p)&&E.push(p),a._executeInEditMode=!0,G(a,V)||(a[V]=!0,e.__preload=(U=e.__preload,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r,n;this[W]=function(e){var t,i=this[e],r=H.getAudio(i);if(r&&!r.disallowMultiple){var o,n=null==(o=this.node)?void 0:o.getComponents(l),s=(n.length,n.find((function(e,t){return e.name==i&&!0})));return s||((s=this.node.addComponent(l)).name=i,s.loop=r.loop,s.volume=r.volume,s.playOnAwake=!1,s.clip=r.clip,s.onDestroy=(t=s.onDestroy,function(){r.delRef(this),t&&t.call(s)}),r.addRef(s)),s}return r},this.onLoad=(r=this.onLoad,function(){var e=this;N=o&&u.isEnum(o)?N:H.ENUM,this.constructor[K].forEach((function(t){var i=S+t,r=I+t,o=j+t;if(e[i]=e[o],e[r]&&e[r].length&&(e[i]=H.hasAudio(e[r])?N[e[r]]:N.UNKNOW_AUDIO),!(e[t]&&e[t]instanceof Proxy)){var n=function(){return null},s=new Proxy(e,{get:function(e,t){var i=e[W](r),o=c.getPropertyDescriptor(i,t);return i&&o?o.get||"function"!=typeof o.value?i[t]:o.value.bind(i):n},set:function(e,t,i){var o=e[W](r),n=c.getPropertyDescriptor(o,t);return!!(o&&n&&n.set)&&(n.set.call(o,i),!0)}});Object.defineProperty(e,t,{get:function(){return s}})}})),r&&r.call.apply(r,[this].concat(t))}),this.onDestroy=(n=this.onDestroy,function(){var e=this;n&&n.call(this),this.constructor[K].forEach((function(t){delete e[t]}))}),U&&U.call.apply(U,[this].concat(t))}))}return void 0===t?e({type:l}):void 0===i?(o=t,n):void n(t,i)}));var E=s.ccclass,w=s.property,P=s.executeInEditMode,z="__ccclassCache__",C="Global",S="__$enum_",I="__$string_",j="__$number_",x=Symbol(),K=Symbol(),R=Symbol(),L=u(((y={}).UNKNOW_AUDIO=0,y)),V=Symbol(),W=Symbol();function G(e,t){var i=c.getSuper(e);return!!e[t]||i!==h&&G(i,t)}var H=e("AudioReference",(m=E("AudioReference"),v=P(!0),_=w({displayOrder:0}),g=w({override:!0,slide:!0,step:.01}),b=w({override:!0,serializable:!0}),A=w({serializable:!0,visible:!1}),O=w({serializable:!0,visible:!1}),N=w({serializable:!0,displayName:"Disallow Multiple Channels",tooltip:"If this field is true, there is only one AudioSource instance of component in the system. The background music is used this field."}),m(k=v((t((D=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,r(t,"_key",M,o(t)),t._store=C,t._savedVolume=1,t._refMap=void 0,r(t,"disallowMultiple",U,o(t)),t}i(t,e),t.registerAudio=function(e){if(e&&e.node){var t,i=null!=(t=this[x])?t:this[x]=new Map,r=e.clip;if(!r)return;var o=e.key||r.name;i.has(o)||(i.set(o,e),this[R]=this.reduceEnums(i))}else a("[AudioReference.registerAudio] Đăng ký "+c.getClassName(this)+" lỗi !. Lỗi do đăng ký một Audio chưa được gán vào node.")},t.removeAudio=function(e){var t,i=null!=(t=this[x])?t:this[x]=new Map;if(i&&i.size){var r=e;if(r&&!i.has(r))return!1;if(r)return i.delete(r),this[R]=this.reduceEnums(i),!0}return!1},t.getAudio=function(e){var t=this[x];return t&&t.size?t.get(e):null},t.hasAudio=function(e){var t=this[x];return!(!t||!t.size)&&t.has(e)},t.reduceEnums=function(e){var t=0,i={};return e.forEach((function(e,r){i[r]=t++})),i.UNKNOW_AUDIO=t,u(i)};var s=t.prototype;return s.setKey=function(e){var i=e.replace(/_[0-9][0-9]/g,"");this._key&&t.removeAudio(this._key),this._key=i,t.registerAudio(this)},s.onLoad=function(){this._refMap=new Map,this.playOnAwake=!1,e.prototype.onLoad.call(this),this.clip&&this.setKey(this.clip.name)},s.onDestroy=function(){this.clip&&t.removeAudio(this.key)},s.resetDefaultVolume=function(){this.volume=this.savedVolume},s.addRef=function(e){this._refMap.set(e.uuid,e)},s.delRef=function(e){this._refMap.delete(e.uuid)},n(t,[{key:"key",get:function(){return!this._key&&this.clip&&this.setKey(this.clip.name),this._key}},{key:"volume",get:function(){return this._volume||1},set:function(e){var t=this;Number.isNaN(e)?console.warn("illegal audio volume!"):(e=p.clamp(e,0,1),this._player?(this._player.volume=e,this._volume=this._player.volume):this._volume=e,this._refMap&&this._refMap.forEach((function(i,r){i!==t&&(i.volume=e)})))}},{key:"clip",get:function(){return this._clip},set:function(e){e!==this._clip&&(this.clip=e,e&&this.setKey(e.name))}},{key:"savedVolume",get:function(){return this._savedVolume}}],[{key:"ENUM",get:function(){return this[R]||L}}]),t}(l)).prototype,"key",[_],Object.getOwnPropertyDescriptor(D.prototype,"key"),D.prototype),t(D.prototype,"volume",[g],Object.getOwnPropertyDescriptor(D.prototype,"volume"),D.prototype),t(D.prototype,"clip",[b],Object.getOwnPropertyDescriptor(D.prototype,"clip"),D.prototype),t(D.prototype,"savedVolume",[A],Object.getOwnPropertyDescriptor(D.prototype,"savedVolume"),D.prototype),M=t(D.prototype,"_key",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(D.prototype,"disallowMultiple",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=D))||k)||k))}}}));

System.register("bundle://common/_virtual/BasicDispatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dispatcher.ts"],(function(t){var e,n,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t._decorator,a=t.warn},function(t){i=t.Dispatcher}],execute:function(){var s,r=n.ccclass;t("BasicDispatcher",r("BasicDispatcher")(s=function(t){function n(e){var n;return(n=t.call(this,e)||this)._tokenMap=null,n._stateNameMapKeys=null,n._penddingId=null,n._callBackMap=null,n._tokenMap=new Map,n._callBackMap=new Map,n._stateNameMapKeys=[],n}e(n,t);var i=n.prototype;return i.skipInvoking=function(){var t=this;this.isDispatching()&&Object.keys(this._isPending).forEach((function(e){t._isPending[e]=!0,t._isHandled[e]=!0}))},i.mapToken=function(t,e){var n=this.__getUniqueStateName(t);return this._tokenMap.set(n,e),this._tokenMap.set(e,n),this._stateNameMapKeys.push(n),n},i.unmapToken=function(t,e){var n=this.searchRegisterName(t);this._tokenMap.get(n)==e&&(this._tokenMap.delete(n),this._tokenMap.delete(e),this._stateNameMapKeys=this._stateNameMapKeys.filter((function(t){return!(t==n)})))},i.findMapName=function(t,e){var n=t;if(n&&!this._isTokenId(n))n+=e?"."+e:"",n=this.searchRegisterName(n);else if(!this.hasRegister(n))return null;return this._tokenMap.get(n)},i.searchRegisterName=function(t){return this.searchAllRegisterNames(t)[0]},i.getAllRegistedStates=function(){return Array.from(this._stateNameMapKeys)},i.searchAllRegisterNames=function(t){return t?this._stateNameMapKeys.reduce((function(e,n){if(t&&t.length<n.length){var i=n.split(/\<|\>/);-1==i.indexOf(t)&&-1==i[0].indexOf(t)||e.push(n)}else t&&t==n?e.push(n):-1!=n.indexOf(t)&&n.length==t.length&&(a("The two state names "+n+" and "+t+" found but are not exactly the same. Please enter the correct names."),a("(Hai state name "+n+" va "+t+" tim duoc nhung ko hoan toan giong nhau. Luu y nhap ten chinh xac.)"),e.push(n));return e}),[]):[]},i._validateIds=function(t){var e=this;return t.reduce((function(t,n){var a=e.findMapName(n);return a&&!e._isTokenId(a)&&(a=e.findMapName(n)),t.concat(a||[])}),[])},i._isTokenId=function(t){return-1!=t.indexOf(this._prefix)},i.getCallBackTask=function(t){var e=this._callBackMap.get(t);return e||(e=[],this._callBackMap.set(t,e)),e},i.__getUniqueStateName=function(t,e){return void 0===e&&(e=1),this._tokenMap.has(t)?this.__getUniqueStateName(t+"."+e,++e):t},i.waitFor=function(e){t.prototype.waitFor.call(this,this._validateIds(e))},i._invokeCallback=function(e){this._penddingId=e,t.prototype._invokeCallback.call(this,e)},i._excuteCallback=function(t){if(!this._pendingAction)throw new Error("Deleted Action !");var e=this._pendingAction.type,n=this.getCallBackTask(e),a=this._callbacks[t];n.push(a.bind(this,this._pendingAction)),this._callBackMap.set(e,n)},i._stopDispatching=function(){for(var e=this._pendingAction.type,n=this.getCallBackTask(e);n.length;)n.shift().call(null);t.prototype._stopDispatching.call(this),this._callBackMap.delete(e)},i.destroy=function(){this._tokenMap=null,this._callBackMap=null,t.prototype.destroy.call(this)},n}(i))||s)}}}));

System.register("bundle://common/_virtual/ChainClip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ParasiteComponent.ts"],(function(t){var e,r,n,i,s,o,l,c,u,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.createClass,o=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){c=t._decorator,u=t.js},function(t){a=t.default}],execute:function(){var p,h,f,C,m,d=c.ccclass,y=c.property;t("ChainClip",(p=d("ChainClip"),h=y({displayName:"Name"}),p((m=e((C=function(t){function e(){for(var e,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,n(e,"clipName",m,i(e)),e._$sub=null,e._$controllerClip=null,e._clipNames=[],e}r(e,t);var c=e.prototype;return c.onLoad=function(){t.prototype.onLoad&&t.prototype.onLoad.call(this),this.super&&(this._clipNames=[this.clipName],Object.prototype.hasOwnProperty.call(this._$super,"_$sub")&&(this.super._$sub=this,this.registerClip(this)))},c.registerClip=function(t){this._clipNames&&-1==this._clipNames.indexOf(t.clipName)&&this._clipNames.push(t.clipName),this._$super&&this._$super.registerClip&&this.super.registerClip(t)},c.excute=function(){var t=o(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c.progress=function(){var t=o(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=this.controller),!e){t.next=9;break}if(!e.isExecutable()){t.next=5;break}return t.next=5,e.excute();case 5:return t.next=7,e.progress(e.nextClip());case 7:return t.next=9,e.eachCompleted();case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.eachCompleted=function(){var t=o(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.controller!=this){t.next=3;break}return t.next=3,this.completed();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.completed=function(){var t=o(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c.nextClip=function(){return this.sub},c.isExecutable=function(){return!0},c.findControllerClip=function(t){if(void 0===t&&(t=this),!t)throw new Error("Can't find player !");var r=t._$super;return r&&u.isChildClassOf(r.constructor,e)?this.findControllerClip(r):t},c.onDestroy=function(){this._$sub=null,this._$controllerClip=null,this._clipNames=null},s(e,[{key:"sub",get:function(){return this._$sub}},{key:"controller",get:function(){return this._$controllerClip||(this._$controllerClip=this.findControllerClip()),this._$controllerClip}}]),e}(a)).prototype,"clipName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=C))||f))}}}));

System.register("bundle://common/_virtual/common",["./LobbyPopup.ts","./PlayerInboxPopup.ts","./PlayerInboxNetwork.ts","./PlayerInboxType.ts","./PlayerInboxButton.ts","./PlayerInboxItem.ts"],(function(){return{setters:[null,null,null,null,null,null],execute:function(){}}}));

System.register("bundle://common/_virtual/Dispatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,s,n,c;return{setters:[function(i){t=i.createClass},function(i){s=i._decorator,n=i.error,c=i.js}],execute:function(){var e,a,h=s.ccclass;i("Dispatcher",h("Dispatcher")(((a=function(){function i(i){this.__ccClassName="",this._prefix="gamify_",this._isHandled=Object.create(null),this._isPending=Object.create(null),this._pendingAction=void 0,this._callbacks=Object.create(null),this._dataTaskPromise=void 0,this._id="",this._isDispatching=void 0,this._lastID=1,this._count=0,this._id=i||this._id,this.__ccClassName=c.getClassName(this)}var s=i.prototype;return s.destroy=function(){this._callbacks=null,this._isHandled=null,this._isPending=null},s.register=function(i){var t=this._prefix+this._lastID++;return this._callbacks[t]=i,t},s.hasRegister=function(i){return!!this._callbacks[i]},s.unregister=function(i){this._callbacks[i]||n(!1),delete this._callbacks[i],Object.keys(this._callbacks).length||this.destroy()},s.waitFor=function(i){this._isDispatching||n(!1);for(var t=0;t<i.length;t++){var s=i[t];this._isPending[s]?this.__detectCircleLoop(s):(this._callbacks[s]||n(!1),this._invokeCallback(s))}},s.dispatch=function(i){this._isDispatching&&n(!1),this._startDispatching(i);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},s.isDispatching=function(){return this._isDispatching},s._invokeCallback=function(i){this._isPending[i]=!0,this._excuteCallback(i),this._isHandled[i]=!0},s._excuteCallback=function(i){try{if(!this._callbacks[i])throw new Error("GamifyStore chưa được đăng ký : "+i);this._callbacks[i](this._pendingAction)}catch(t){n("Error when execute callback at "+i+" -action "+JSON.stringify(this._pendingAction))}},s._startDispatching=function(i){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingAction=i,this._isDispatching=!0},s._stopDispatching=function(){delete this._pendingAction,this._isDispatching=!1},s.__detectCircleLoop=function(i){this._isHandled[i]||n(!1)},t(i,[{key:"id",get:function(){return this._id}}],[{key:"instance",get:function(){return this._instance||(this._instance=new i("global")),this._instance}}]),i}())._instance=void 0,e=a))||e)}}}));

System.register("bundle://common/_virtual/env",[],(function(e){return{execute:function(){e("EDITOR",!1)}}}));

System.register("bundle://common/_virtual/FloatButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtils.ts"],(function(t){var e,i,o,n,s,a,h,r,c,u,l,d,p,f,y,v,m,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t._decorator,a=t.UITransform,h=t.UIOpacity,r=t.EventHandler,c=t.Vec3,u=t.Input,l=t.NodeEventType,d=t.view,p=t.Vec2,f=t.sys,y=t.Tween,v=t.tween,m=t.Component},function(t){g=t.GameUtils}],execute:function(){var O,E,T,L,M,S,I,U,w=s.ccclass,b=s.property,C=s.requireComponent,P=s.executeInEditMode;t("FloatButton",(O=w("FloatButton"),E=P(!0),T=C(a),L=C(h),M=b({type:[r]}),O(S=E(S=T(S=L((U=e((I=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(e,"clickEvents",U,n(e)),e.saveKey=void 0,e.touchOffset=void 0,e.minVec=new c,e.maxVec=new c,e.uiOpacity=void 0,e.dimOpacity=90,e.dimDuration=3,e.dragable=!0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){var t,e;this.saveKey="G"+g.getHashFromString(this.node.getPathInHierarchy()+"::FloatButton"),this.uiOpacity=this.node.getComponent(h)||this.node.addComponent(h),u.EventType.TOUCH_START,this.node.on(l.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(l.MOUSE_LEAVE,this.onMouseLeave,this),this.node.on(l.TOUCH_START,this.onTouchStart,this),this.node.on(l.TOUCH_MOVE,this.onTouchMove,this),this.node.on(l.TOUCH_END,this.onTouchEnd,this),this.node.on(l.TOUCH_CANCEL,this.onTouchEnd,this),this.onMouseLeave();var i=null==(t=this.node)?void 0:t.getComponent(a),o=null==(e=this.node)||null==(e=e.parent)?void 0:e.getWorldPosition(),n=i.contentSize,s=d.getDesignResolutionSize(),r=-s.width/2+n.width/2,c=s.width/2-n.width/2,f=-s.height/2+n.height/2,y=s.height/2-n.height/2;p.set(this.minVec,o.x+r,o.y+f),p.set(this.maxVec,o.x+c,o.y+y)},s.start=function(){var t=g.getLocalStorageItem(this.saveKey);if(t){var e=JSON.parse(t),i=new c(e.x,e.y,e.z);this.node.setWorldPosition(i)}},s.onMouseEnter=function(){this.uiOpacity.opacity==this.dimOpacity?this.dimIn():this.unscheduleAllCallbacks()},s.onMouseLeave=function(){this.scheduleOnce(this.dimOut,this.dimDuration)},s.onTouchStart=function(t){if(t.target){f.isMobile&&this.onMouseEnter();var e=t.getUILocation(),i=new c(e.x,e.y,0),o=this.node.getWorldPosition();this.touchOffset=i.subtract(o)}},s.onTouchMove=function(t){if(this.dragable&&this.touchOffset){var e=t.getUILocation(),i=new c(e.x,e.y,0).subtract(this.touchOffset);i.clampf(this.minVec,this.maxVec),this.node.setWorldPosition(i)}},s.onTouchEnd=function(t){if(this.dragable){f.platform===f.Platform.MOBILE_BROWSER&&this.onMouseLeave();var e=t.getUILocation(),i=t.getUIStartLocation();e.subtract(i).length()<5?this.onPress(t):g.setLocalStorageItem(this.saveKey,JSON.stringify(this.node.getWorldPosition()))}},s.onPress=function(t){r.emitEvents(this.clickEvents)},s.dimIn=function(){y.stopAllByTarget(this),v(this.uiOpacity).to(.3,{opacity:255}).start()},s.dimOut=function(){y.stopAllByTarget(this),v(this.uiOpacity).to(.3,{opacity:this.dimOpacity}).start()},e}(m)).prototype,"clickEvents",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=I))||S)||S)||S)||S))}}}));

System.register("bundle://common/_virtual/GamePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamifyComponent.ts"],(function(e){var n,t,o,r,i,a,c,s,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e._decorator,a=e.UITransform,c=e.director,s=e.Canvas},function(e){p=e.GamifyComponent}],execute:function(){var u,l,f,m,h,d=i.ccclass,C=i.property;e("GamePopup",(u=d("GamePopup"),l=C({tooltip:"Cover the entire screen."}),u((h=n((m=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,o(n,"canCoverTheScreen",h,r(n)),n}t(n,e);var i=n.prototype;return i.onLoad=function(){this.runInBackground=!0,e.prototype.onLoad.call(this)},i.onInit=function(n){e.prototype.onInit.call(this,n),this.resizeTransform()},i.resizeTransform=function(){if(this.canCoverTheScreen){var e=this.node.getComponent(a)||this.node.addComponent(a),n=c.getScene().getComponentInChildren(s);if(n&&n.node){var t=n.node.getComponent(a);e.setContentSize(t.contentSize)}}},n}(p)).prototype,"canCoverTheScreen",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=m))||f))}}}));

System.register("bundle://common/_virtual/GameUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,a,i,u,c,s,g,l,f,d,m,v;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t._decorator,o=t.assetManager,a=t.warn,i=t.UITransform,u=t.Vec3,c=t.Rect,s=t.tween,g=t.CCClass,l=t.Enum,f=t.js,d=t.Size,m=t.sys,v=t.Quat}],execute:function(){var h,p,x=r.ccclass;r.property,t("GameUtils",x("GameUtils")(((p=function(){function t(){}return t.getAsset=function(e,n){var r=t.cachedAssets.get(e);return r?o.assets.get(r):o.assets.find((function(o,a){var i=o.name==e&&o instanceof n;return i&&(r=a,t.cachedAssets.set(e,a)),i}))},t.getHashFromString=function(t,e){void 0===e&&(e=!1);var n=0;if(0===t.length)return n.toString();for(var r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e?n.toString():Math.abs(n).toString()},t.getNameByPath=function(t){return t&&t.length?t.replace(/^.*[\\\/]/,""):""},t.generateSplitRegex=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){2==e.length?(t=t?t+"|":t,t+="("+e[0]+"[^"+e[1]+"]*"+e[1]+"|[^"+e[0]+e[1]+"]+)"):a("This bracket "+e+" should be only 2 characters.")})),t?new RegExp(t,"g"):new RegExp(/(<[^>]+>|[^<>]+)/,"g")},t.convertUICordinate=function(t,e,n){var r=e.getComponent(i),o=n.getComponent(i);if(r&&o){var a=new u,c=new u;return r.convertToWorldSpaceAR(t,a),o.convertToNodeSpaceAR(a,c),c}return null},t.relocateUIBoundingBox=function(e,n){var r=e.getComponent(i);if(!e||!e.parent||!n)return null;var o=r.anchorPoint,a=r.getBoundingBox(),s=t.convertUICordinate(new u(a.xMin,a.yMin,a.z),e.parent,n),g=t.convertUICordinate(new u(a.xMax,a.yMax,a.z),e.parent,n),l=s&&g?g.x-s.x:r.contentSize.width,f=s&&g?g.y-s.y:r.contentSize.height,d=o.x*l,m=o.y*f,v=s?s.x+d:0,h=s?s.y+m:0;return new c(v,h,l,f)},t.countingTween=function(t,e,n,r,o){var a=r&&r.fixed||0,i=r&&r.delay||0,u=r&&r.duration||.8,c=parseFloat(t.toFixed(a)),g=parseFloat(e.toFixed(a)),l=s({value:c}).delay(i).to(u,{value:g},{onUpdate:function(t,e){var r=t.value;n&&n(parseFloat(r.toFixed(a)))},onComplete:function(t){t.value}}).call((function(){l.stop(),o&&o(g)})).start();return l},t.delay=function(){var t=e(n().mark((function t(e,r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=.5),t.next=3,new Promise((function(t){s(e).delay(r).call(t).start()}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),t.tweenPromise=function(){var t=e(n().mark((function t(e,r,o){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var n=Object.create(null);if(n.duration=r.duration,r.position&&(n.position=r.position),r.scale&&(n.scale=r.scale),r.rotation){var a=new v;v.fromEuler(a,r.rotation.x,r.rotation.y,r.rotation.z),n.rotation=a}s(e).to(r.duration,n,o).call((function(){t()})).start()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),t.setEnumAttr=function(t,e,n){g.Attr.setClassAttr(t,e,"type","Enum"),g.Attr.setClassAttr(t,e,"enumList",l.getList(n))},t.updateEnum=function(t,e,n){var r=Object.assign(l({}),n);l.update(r),g.Attr.setClassAttr(t,e,"type","Enum"),g.Attr.setClassAttr(t,e,"enumList",l.getList(r))},t.getEnumFromArray=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Array.from(e).reduce((function(t,e){return t.concat(e)}),[]),o={};return r.forEach((function(t,e){f.isString(t)&&(o[t]=e)})),l(o)},t.calculateAligning=function(t,e,n){void 0===n&&(n=!1);var r=t.height/e.height,o=t.width/e.width;return o>r!==n?new d(e.width,t.height*(1/o)):new d(t.width*(1/r),e.height)},t.isLatinWord=function(t){return/^[A-z\u00C0-\u00ff\s'\.,-\/#!$%\^&\*;:{}=\-_`~()]+$/.test(t)},t.getMaxDateNumber=function(t,e){var n=31;return[4,6,9,11].indexOf(t)>=0&&(n=30),2==t&&(n=e%400==0?29:e%100==0?28:e%4==0?29:28),n},t.formatDate=function(e,n){void 0===n&&(n=!1);var r=e.getSeconds(),o=e.getMinutes(),a=e.getHours(),i=e.getDate(),u=e.getMonth()+1,c=e.getFullYear();return n?(a<=9?"0"+a:a)+":"+(o<=9?"0"+o:o)+":"+(r<=9?"0"+r:r)+" "+(u<=9?"0"+u:u)+"/"+(i<=9?"0"+i:i):c+"/"+(u<=9?"0"+u:u)+"/"+(i<=9?"0"+i:i)+" "+(a<=9?"0"+a:a)+":"+(o<=9?"0"+o:o)+" ("+t.getGMTString(e)+")"},t.getGMTString=function(t){var e=-t.getTimezoneOffset(),n=e>=0?"+":"-";return e=Math.abs(e),"GMT"+n+Math.floor(e/60)+":"+((e%=60)<=9?"0"+e:e)},t.getCreditString=function(t,e,n){},t.getFormattedCreditString=function(t,e){void 0===e&&(e=!1);var n=parseFloat(t.toFixed(10)),r=(n.toString(),{minimumFractionDigits:e?0:2,maximumFractionDigits:e?0:2,style:"decimal"});return n.toLocaleString(void 0,r)},t.getThinCreditString=function(t,e){if(void 0===e&&(e=!1),t>-1e3&&t<1e3)return this.getFormattedCreditString(t,e);var n=Math.trunc(t),r="",o=!1;n<0&&(o=!0,n*=-1),n>=1e3&&n<1e6&&(n/=1e3,r="K"),n>=1e6&&n<1e9&&(n/=1e6,r="M"),n>=1e9&&n<1e12&&(n/=1e9,r="B"),n>=1e12&&(n/=1e12,r="T");var a=new RegExp("(\\d+\\.\\d{3})(\\d)"),i=n.toString().match(a),u=(n=i?parseFloat(i[1]):n).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:3,style:"decimal"});return o&&(u="-"+u),u+=r},t.getLocalStorageItem=function(t){return m.localStorage.getItem(t)},t.removeLocalStorageItem=function(t){m.localStorage.removeItem(t)},t.setLocalStorageItem=function(t,e){m.localStorage.setItem(t,e)},t.mappingArrays=function(t,e,n,r,o){for(var a=Math.max(t.length,e.length),i=0;i<a;i++){var u=t[i],c=e[i];!!u>!!c?n(u,c,i):!!u<!!c?r(u,c,i):o(u,c,i)}},t}()).cachedAssets=new Map,p.PATTERN_URL=/^.*[\\\/]/,h=p))||h)}}}));

System.register("bundle://common/_virtual/GamifyComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RenderOrderDispatcher.ts","./GamifyStore.ts","./Helper.ts"],(function(e){var t,n,r,i,s,o,a,u,c;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){i=e._decorator,s=e.warn,o=e.js},function(e){a=e.RenderOrderDispatcher},function(e){u=e.GamifyStore},function(e){c=e.Helper}],execute:function(){i.property;var d,h=i.ccclass;e("GamifyComponent",h("GamifyComponent")(d=function(e){function i(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._capturedState=null,t._capturedAction=null,t._registerCapturedState=null,t._requireRenders=[],t.runInBackground=!1,t}t(i,e),i.isSubClass=function(e){return o.isChildClassOf(o.getClassByName(e),i)};var u=i.prototype;return u.onLoad=function(){(this.runInBackground||this.enabled)&&e.prototype.onLoad.call(this)},u.onPreRender=function(){var e=n(r().mark((function e(t,n,i,s){var o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._capturedAction=s,this._capturedState=n,e.next=4,this.onRender((function(e){t(e),o._capturedState=null}),n,i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),u.onRender=function(){var e=n(r().mark((function e(t,n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),u.onCompletedRender=function(e){},u.onCompletedAllRenders=function(e,t){},u.wait=function(e){var t=this.getDispatcher();return t&&t instanceof a&&t.renderBefore([e],this.getStateName()),this},u.render=function(e){var t=this;void 0===e&&(e=!1);var n=this.getDispatcher();if(n.isDispatching()){var r=e?c.clone(this._registerCapturedState):Object.assign({},this._registerCapturedState);return this._requireRenders||(this._requireRenders=[]),this._requireRenders.push((function(){n&&n instanceof a&&n.registerRender(t.getStateName(),r,t.onPreRender.bind(t),t.onCompletedRender.bind(t),t.hasUsingFuntion("onCompletedAllRenders")?t.onCompletedAllRenders.bind(t):null)})),this}s("Do not register render outside the dispatching data flow. Warning from "+this.getStateName())},u.registerRender=function(){if(this._requireRenders)for(;this._requireRenders.length;)this._requireRenders.shift().call(this)},u.removeAllRegisterRender=function(){var e;null!=(e=this.getDispatcher())&&e.isDispatching()&&this._requireRenders&&this._requireRenders.length&&(this._requireRenders.length=0)},u.getCaptureState=function(){return this._capturedState||this.getState()},u.hasUsingFuntion=function(e){return Object.prototype.hasOwnProperty.call(this.constructor.prototype,e)},u.reduce=function(t,n){return this._registerCapturedState=t,this._registerCapturedState.action=n.type,e.prototype.reduce.call(this,t,n)},u.__endingInvokeOnDispatch=function(t){e.prototype.__endingInvokeOnDispatch.call(this,t),this._registerCapturedState=null},u.__emitChange=function(){this.registerRender(),e.prototype.__emitChange.call(this)},u.__rejectChange=function(){this.removeAllRegisterRender(),e.prototype.__rejectChange.call(this)},u._checkRule=function(e){return!0},u.__detectedUndefinedState=function(t,n){e.prototype.__detectedUndefinedState.call(this,t,n)},i}(u))||d)}}}));

System.register("bundle://common/_virtual/GamifyDispatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MechanicDispatcher.ts","./Helper.ts"],(function(t){var n,e,i,c,s;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){i=t._decorator,c=t.js},function(t){s=t.MechanicDispatcher},null],execute:function(){var a,r,o=i.ccclass;t("GamifyDispatcher",o("GamifyDispatcher")(((r=function(t){function i(n){return t.call(this,n)||this}n(i,t),i.clearInstance=function(){this._instance=null};var s=i.prototype;return s.mapToken=function(n,e){return t.prototype.mapToken.call(this,n,e)},s.unmapToken=function(n,e){t.prototype.unmapToken.call(this,n,e)},s.destroy=function(){t.prototype.destroy.call(this);var n=c.getClassByName(this.__ccClassName);n.instance&&n.instance==this&&n.clearInstance()},e(i,null,[{key:"STORE_ENUM",get:function(){return this._enum_}},{key:"instance",get:function(){return this._instance||(this._instance=new i("global")),this._instance}}]),i}(s))._enum_=void 0,r._instance=void 0,a=r))||a)}}}));

System.register("bundle://common/_virtual/GamifyScenario.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MechanicDispatcher.ts","./GamifyComponent.ts"],(function(t){var e,n,i,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t._decorator},function(t){i=t.MechanicDispatcher},function(t){r=t.GamifyComponent}],execute:function(){var c,o=n.ccclass,s=n.disallowMultiple;t("GamifyScenario",o("GamifyScenario")(c=s(!0)(c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._selectedAction=void 0,e}e(n,t);var r=n.prototype;return r.isRendering=function(){var t=this.getDispatcher();return!!(t&&t instanceof i)&&t.isRendering()},r.searchAllStateNames=function(t){var e=this.getDispatcher();return e&&e instanceof i?e.searchAllRegisterNames(t):[]},r.action=function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var c=i;return"string"==typeof t?e={type:t}:(e=t,c=c||t.receiver),this._selectedAction=e,this},r.clear=function(){if(this._selectedAction){var t=this.getDispatcher();t&&t instanceof i&&(t.isDispatching(),t.removeDefaultActionScenerio(this._selectedAction))}return this},r.sequence=function(){var t=this._selectedAction||this._currentAction;if(t){var e=this.getDispatcher();if(e&&e instanceof i){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];e.registerActionScenario(t,r)}return this._selectedAction=null,!0}return!1},r.parallel=function(){var t=this._selectedAction||this._currentAction;if(t){var e=this.getDispatcher();if(e&&e instanceof i){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return r.forEach((function(n){e.registerActionScenario(t,[n])})),this._selectedAction=null,!0}}return!1},r.modify=function(){var t=this._selectedAction||this._currentAction;if(t){var e=this.getDispatcher();if(e&&e instanceof i){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e.registerConfigAction(t,r),this._selectedAction=null,!0}}return!1},n}(r))||c)||c)}}}));

System.register("bundle://common/_virtual/GamifyStore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Reducer.ts","./BasicDispatcher.ts","./GamifyDispatcher.ts","./Helper.ts","./ActionStoreDispatcher.ts"],(function(t){var e,n,i,r,s,a,c,o,h,l,u,f;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t._decorator,r=t.find,s=t.error,a=t.warn,c=t.js},function(t){o=t.Reducer},function(t){h=t.BasicDispatcher},function(t){l=t.GamifyDispatcher},function(t){u=t.Helper},function(t){f=t.ActionStoreDispatcher}],execute:function(){var _,g=i.ccclass,p=/(?<=\<).+?(?=\>)/g,m=/(?<=\[).+?(?=\])/g,d=t("STORE_ACTION",{NEW_STATE_REGISTED:"store_action_new_state_registed"});t("GamifyStore",g("GamifyStore")(_=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._currentAction=null,e._stateName=void 0,e._rollCallCached=void 0,e}e(i,t);var o=i.prototype;return o.initialized=function(t){this.onInit(t),this.dispatch({type:d.NEW_STATE_REGISTED})},o.onStoreRegisted=function(t,e){},o.onInit=function(t){},o.onData=function(t,e){return t},o.onRemove=function(){},o.onRejectedAction=function(t){},o.allowActionTypes=function(){return[]},o.dispatch=function(t){t.sender=this.getStateName();for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t.receiver=n||t.receiver||[],t.stores||(t.stores=Object.create(null)),t.stores[this.getStateName()]=this.getState()||Object.create(null),this.getDispatcher().dispatch(t)},o.preventDispatching=function(){var t=this.getDispatcher();t&&t instanceof h&&t.skipInvoking()},o.rollCallSameAction=function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(this._currentAction){var r=this._currentAction.type,s=this.searchRegisterName(this._currentAction.sender),a=n.reduce((function(e,n){var i=t.searchRegisterName(n);return i&&e.push(i),e}),[]),c=this._rollCallCached.get(r)||[],o=c.indexOf(s);0==o&&(c=[],o=-1),-1==o&&-1!=a.indexOf(s)&&(c.push(s),this._rollCallCached.set(r,c));var h=c.length==a.length;return h}return!1},o.senderIsMe=function(){return this._currentAction.sender==this.getStateName()},o.getStateName=function(){if(!this._stateName){if(this.node){var t=this.node.getPathInHierarchy()||this.node.name;t=t.replace(/\//g,"."),this._stateName=t+"<"+this.__ccClassName+">"}else this._stateName=this.__ccClassName+"<"+this.__ccClassName+">";var e=this.searchAllRegisterNames(this._stateName);e.length&&(this._stateName=this._stateName+"["+e.length+"]")}return this._stateName},o.getStoreComponent=function(t){var e=t.slice(0,t.indexOf("<")),n=r(e);if(n){var i=this.getStoreName(t);return-1!==this.getIndexOfSameStores(t)?n.getComponents(i).find((function(e){return e.getStateName()==t})):n.getComponent(i)}return null},o.getStoreName=function(t){var e=t||(this._currentAction?this._currentAction.sender:null);if(e&&e.length){var n=e.match(p);if(n){var i,r=null==(i=n[0])?void 0:i.split(/\s/g);if(r&&r.length)return r[0]}}return null},o.getIndexOfSameStores=function(t){var e=t||(this._currentAction?this._currentAction.sender:null);if(e&&e.length){var n=e.match(m);if(n){var i,r=null==(i=n[0])?void 0:i.split(/\s/g);if(r&&r.length)return parseInt(r[0])}}return-1},o.searchRegisterName=function(t){var e=this.getDispatcher();return e&&e instanceof h?e.searchRegisterName(t):null},o.searchAllRegisterNames=function(t){var e=this.getDispatcher();return e&&e instanceof f?e.searchAllRegisterNames(t):null},o.areEqual=function(t,e){return u.areEqual(t,e)},o.getOtherState=function(t){this._currentAction||s(!1);var e=this._currentAction;this.getDispatcher();e.stores||(e.stores=Object.create(null));var n=this.searchAllRegisterNames(t);try{this.getDispatcher().waitFor(n)}catch(t){}return this._currentAction=e,n.length&&n.length>1&&a("More than one store "+n+" received from "+t),this._currentAction.stores[n[0]]},o.hasOtherState=function(t){var e;if(this._currentAction||s(!1),!this._currentAction.stores)return!1;var n=this.searchAllRegisterNames(t);return n.length&&n.length>1&&a("More than one store "+n+" received from "+t),!(null==(e=this._currentAction)||!e.stores[n[0]])},o.isStoreRegisted=function(t){var e=this.searchAllRegisterNames(t);return e&&!!e.length},o.__prepareInvokeOnDispatch=function(t){this._currentAction=t,this.__shareState()},o.__emitChange=function(){this.__shareState(),t.prototype.__emitChange.call(this)},o.__endingInvokeOnDispatch=function(t){this._currentAction=null},o._validateAction=function(t){var e=this,n=this.getStateName(),i=this.allowActionTypes(),r=[d.NEW_STATE_REGISTED].concat(i),s=t.receiver||[],a=!s.length;return s.forEach((function(t){var i=e.searchAllRegisterNames(t);i&&(a=a||-1!=i.indexOf(n))})),!(i.length&&-1==r.indexOf(t.type))&&a},o._checkRule=function(t){return c.isChildClassOf(c.getClassByName(t),i)},o.__detectedUndefinedState=function(t,e){},o.__shareState=function(){this._currentAction&&(this._currentAction.stores||(this._currentAction.stores=Object.create(null)),this._currentAction.stores[this.getStateName()]=this.getState()||Object.create(null))},o.__setStateName=function(t){this._stateName=t},o.__invokeOnDispatch=function(e){this._validateAction(e)?(this.__prepareInvokeOnDispatch(e),t.prototype.__invokeOnDispatch.call(this,e),this.__endingInvokeOnDispatch(e)):this.onRejectedAction(e)},o.reduce=function(t,e){return e.type==d.NEW_STATE_REGISTED?this.onStoreRegisted(t,e)||t:this.onData(t,e)||t},o.setDispatcher=function(e,n){void 0===n&&(n=!1),t.prototype.setDispatcher.call(this,e,n);var i=this.getDispatcher();i&&i instanceof l&&!n&&this.__setStateName(i.mapToken(this.getStateName(),this.getDispatchToken()))},o.removeDispatcher=function(){var e=this.getDispatcher();e&&e instanceof l&&e.unmapToken(this.getStateName(),this.getDispatchToken()),t.prototype.removeDispatcher.call(this)},o.waitFor=function(e){this.getDispatcher();t.prototype.waitFor.call(this,e)},o.onLoad=function(){var e;t.prototype.onLoad.call(this),this.setDispatcher(l.instance),this._rollCallCached=new Map;var n=null==(e=this.getDispatcher())?void 0:e.getAllRegistedStates();this.initialized(n)},o.onDestroy=function(){this.onRemove(),t.prototype.onDestroy.call(this)},n(i,[{key:"initialState",get:function(){return{}}}]),i}(o))||_)}}}));

System.register("bundle://common/_virtual/Helper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SearchingSet.ts"],(function(e){var n,t,r,o,a,i,c,u,f,s,l,h,p,g;return{setters:[function(e){n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){r=e._decorator,o=e.js,a=e.UITransform,i=e.Vec3,c=e.Rect,u=e.ValueType,f=e.CCClass,s=e.error,l=e.Enum,h=e.Vec2,p=e.Component},function(e){g=e.SearchingSet}],execute:function(){var v,d=r.ccclass,y=e("IHelper",function(){function e(){}return e.convertToEnum=function(e){},e}());e("Helper",d("Helper")(v=function(e){function r(){return e.apply(this,arguments)||this}return n(r,e),r.getHierarchyMethod=function(e,n){return e?(null==e?void 0:e.prototype[n])||this.getHierarchyMethod(o.getSuper(e),n):null},r.calculateClingBox=function(e,n){if(!e.parent)throw new Error("There is no parent in this node to snap. (Không có parent để đính vào.)");var t=n.getComponent(a);if(!t)throw new Error("There is no cc.UITransform component in targetNode. (Không có component cc.UITransform trong targetNode.)");var r=e.getComponent(a);if(!r)throw new Error("There is no cc.UITransform component in movingNode. (Không có component cc.UITransform trong movingNode.)");var o=e.parent.getComponent(a);if(!o)throw new Error("There is no cc.UITransform component in the parent node of movingNode. (Không có component cc.UITransform trong node cha của movingNode.)");var u=r.anchorPoint,f=t.getBoundingBoxToWorld(),s=o.convertToNodeSpaceAR(new i(f.xMin,f.yMin,f.z)),l=o.convertToNodeSpaceAR(new i(f.xMax,f.yMax,f.z)),h=s.x,p=s.y,g=l.x-s.x,v=l.y-s.y,d=new c(h,p,g,v),y=u.x*d.width,m=u.y*d.height;return d.x=s.x+y,d.y=s.y+m,d.z=s.z,d},r.isChildClassOf=function(e,n){return o.isChildClassOf(o.getClassByName(e),o.getClassByName(n))},r.searchStringInArray=function(e,n){for(var t=0;t<n.length;t++)if(n[t].match(e))return t;return-1},r.isEmpty=function(e){return 0===Object.keys(e).length&&e.constructor===Object},r.isNull=function(e){return null==e||void 0===e},r.areEqual=function(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(Array.isArray(e)&&Array.isArray(n)){var o=e.length;if(o!=n.length)return!1;for(var a=o;0!=a--;)if(!r.areEqual(e[a],n[a]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(var i,c=t(e.entries());!(i=c()).done;){var u=i.value;if(!n.has(u[0]))return!1}for(var f,s=t(e.entries());!(f=s()).done;){var l=f.value;if(!r.areEqual(l[1],n.get(l[0])))return!1}return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(var h,p=t(e.entries());!(h=p()).done;){var g=h.value;if(!n.has(g[0]))return!1}return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){var v=e.byteLength;if(v!=n.byteLength)return!1;for(var d=v;0!=d--;)if(e[d]!==n[d])return!1;return!0}if(e.valueOf&&e.valueOf!==Object.prototype.valueOf&&n.valueOf&&n.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString&&e.toString!==Object.prototype.toString&&n.toString&&n.toString!==Object.prototype.toString)return e.toString()===n.toString();var y=Object.keys(e),m=y.length;if(m!==Object.keys(n).length)return!1;for(var b=m;0!=b--;)if(!Object.prototype.hasOwnProperty.call(n,y[b]))return!1;for(var O=m;0!=O--;){var S=y[O];if(!r.areEqual(e[S],n[S]))return!1}return!0}return e!=e&&n!=n},r.clone=function(e,n){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t=[],e.forEach((function(e,n){t[n]=r.clone(e)}));else if(e instanceof Map)t=new Map,e.forEach((function(e,n){t.set(n,r.clone(e))}));else if(e instanceof Set)t=new Set,e.forEach((function(e){t.set(r.clone(e))}));else if(e instanceof u)t=e.clone();else{t={},Object.keys(e).forEach((function(o){n&&-1!=n.indexOf(o)||(t[o]=r.clone(e[o]))}))}return t}return e},r.typeOf=function(e){return Array.isArray(e)?Array:e instanceof Map?Map:e instanceof Set?Set:e instanceof u?u:f._isCCClass(e)?o.getClassByName(o.getClassName(e)):Object},r.merge=function(e,n,t){n&&"object"==typeof n&&Object.keys(n).forEach((function(o){t&&-1!=t.indexOf(o)||(e[o]?r.merge(e[o],n[o]):e[o]=n[o])}))},r.getCommand=function(e,n){void 0===n&&(n=/\{state\.(.*)}/);var t=e.replace(/\s+/g,"").trim(),r=t.match(n);if(r&&r[1])return r[1];var o=/\{(.*)}/;return n.source!=o.source?this.getCommand(t,o):null},r.searchValue=function(e,n,t){return t&&-1!==t.indexOf(n)?e:e&&"object"==typeof e?(Object.keys(e).forEach((function(c){var u=t?t+"."+c:c,f=r.searchValue(e[c],n,u);(f||o.isNumber(f))&&(!a||a&&i&&u.length<i.length)&&(a=f,i=u)})),a):null;var a,i},r.copyInside=function(e,n,t,o){for(var a="string"==typeof n?r.searchValue(e,n):n,i=t.split("."),c=e;i.length-1>0;){var u=i.shift();c[u]=c[u]||Object.create(null),c=c[u]}var f=i.shift();c[f]=o?o(f,a,t):a},r.updateValue=function(e,n,t){var r=this.searchReferenceObject(n,e);r?r[r.key]=t:s("Search Path chưa đúng => "+n)},r.searchReferenceObject=function(e,n,t){return t&&-1!=t.indexOf(e)?n:n&&"object"==typeof n?(Object.keys(n).findIndex((function(a){var i=t?t+"."+a:a,c=r.searchReferenceObject(e,n[a],i);return!(o||!c)&&((o=Object.create(null)).parent=n,o.key=a,o.value=n[a],!0)})),o):null;var o},r.convertToEnum=function(e){var n={};return(Array.isArray(e)?e:Object.keys(e)).forEach((function(e,t){return n[e]=t})),l(n)},r.enumKey=function(e,n){for(var t in e)if(e[t]===n)return t;return""},r.detechUnitVector=function(e){var n=Math.abs(e.x)||1,t=Math.abs(e.y)||1,r=Math.abs(e.z)||1;return e.clone().divide3f(n,t,r)},r.positiveVector=function(e){return e instanceof h?new h(Math.abs(e.x),Math.abs(e.y)):e instanceof i?new i(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z||0)):e},r.calculateAnchorSizeVector=function(e,n){var t=n instanceof a?n.contentSize.width:n.w,r=n instanceof a?n.contentSize.height:n.h,o=n.anchorX,i=n.anchorY;return e.clone().multiply3f(o*t,(1-i)*r,0)},r.areNegative=function(e,n){return!(e.x*n.x>=0&&e.y*n.y>=0)},r.queryParamsToString=function(e){return e?"?"+Object.keys(e).map((function(n){return encodeURIComponent(n)+"="+e[n]})).join("&"):""},r.isHttpURL=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},r.parseHttpURL=function(e){},r.urlToArray=function(e){for(var n={},t=e.substring(e.indexOf("?")+1).split("&"),r=0;r<t.length;r++)if(t[r]){var o=t[r].split("=");n[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return n},r.arrayToURL=function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},r.getUrlVars=function(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(n,t,r){e[t]=r}));return e},r.formatFloatToString=function(e,n,t,r){void 0===n&&(n=2),void 0===t&&(t=!0),void 0===r&&(r="");var o=(e=parseFloat(e.toFixed(10))).toString(),a=-1!=o.indexOf(".")?o.length-1-o.indexOf("."):0;n>0&&(a=Math.min(a,n));var i=t?{minimumFractionDigits:Math.max(a,2),style:r.length>0?"currency":"decimal",currency:r.length>0?r:"USD"}:{};return a>=2?t?parseFloat(o).toLocaleString(void 0,i):o:t?e.toLocaleString(void 0,i):e.toFixed(2)},r.getStringInsideSignal=function(e,n){if(void 0===n&&(n="<>"),e&&e.length){var t=n.split(""),r=t[0],o="/(?"+r+"=\\"+r+").+?(?=\\"+t[1]+")/g;",a=e.match(new RegExp(o))[0].split(/\s/g);if(a&&a.length)return a[0]}},r.upperCaseFirstCharacter=function(e){return e.replace(/\b\w/g,(function(e){return e.toUpperCase()})).replace(/(?=[A-Z])/g," ")},r.search=function(e,n){var t;return n instanceof g?t=n:(t=new g,n.forEach((function(e){t.add(e)}))),t.isEmpty()?null:t.get(e).reduce((function(e,n){return e.push(n[1]),e}),[])},r.updateEnum=function(e,n,t){var r=Object.assign(l({}),t);return l.update(r),f.Attr.setClassAttr(e,n,"type","Enum"),f.Attr.setClassAttr(e,n,"enumList",l.getList(r)),r},r.getClassNameFromPrefab=function(e){var n=e.data.getComponent(p);return n?o.getClassName(n):null},r.swapElements=function(e,n,t){var r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]},r}(y))||v)}}}));

System.register("bundle://common/_virtual/LanguageConvertorPackage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LocalizationController.ts","./env","./GameUtils.ts","./Helper.ts","./RemoteScriptImporter.ts"],(function(e){var t,n,i,r,o,a,l,s,p,u,c,m,g,h,d,f,y,b,v,T,E,z,S,_,C,x,A,M,I,N,R,w,O;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.createClass,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.regeneratorRuntime},function(e){l=e._decorator,s=e.Enum,p=e.SpriteFrame,u=e.CCBoolean,c=e.Prefab,m=e.SpriteAtlas,g=e.UITransform,h=e.Label,d=e.Sprite,f=e.Layers,y=e.Node,b=e.instantiate,v=e.Vec3,T=e.CCClass,E=e.log,z=e.Layout,S=e.LabelOutline,_=e.LabelShadow,C=e.js,x=e.error,A=e.Component},function(e){M=e.SupportedLanguages},function(e){I=e.EDITOR},function(e){N=e.GameUtils},function(e){R=e.Helper},function(e){w=e.importRemoteCCClass,O=e.remoteCCClass}],execute:function(){var F,k,L,D,G,P,H,B,U,X,j,W,K,V,Y,Z,q,J,Q,$,ee,te,ne,ie,re,oe,ae,le,se,pe,ue,ce,me,ge,he,de,fe,ye,be,ve,Te,Ee,ze,Se,_e,Ce,xe,Ae,Me,Ie,Ne,Re,we,Oe,Fe,ke=l.ccclass,Le=l.property,De=l.executeInEditMode,Ge=w("LocalizationController"),Pe="element",He=e("LangEnum",N.getEnumFromArray(M,"default")),Be=function(e){return e[e.NORMAL_TEXT=0]="NORMAL_TEXT",e[e.RICH_TEXT=1]="RICH_TEXT",e[e.IMAGE_TEXT=2]="IMAGE_TEXT",e}(Be||{});s(Be);var Ue=s({NO_CONFIG:0}),Xe=s({CHOOSE_STYLE_TEMPLATE_FIRST:0}),je=(F=ke("LanguageSymbol"),k=Le({displayName:"Replaced Tag"}),L=Le({type:Ue,visible:function(){return!this._spriteFrame&&!R.areEqual(this.enum,Ue)},serializable:!0,displayName:"Sprite Frame"}),D=Le({type:p,serializable:!0,visible:!0,displayName:"Embed SpriteFrame"}),G=Le({visible:!1,serializable:!0}),P=Le({visible:!1,serializable:!0}),H=Le({visible:!1,serializable:!0}),B=Le({visible:!1,serializable:!0}),U=Le({visible:!1,serializable:!0}),F(((q=function(){function e(){r(this,"_tag",W,this),r(this,"_spriteFrameName",K,this),r(this,"_spriteFrameEnum",V,this),r(this,"_spriteFrame",Y,this),r(this,"enum",Z,this)}return e.prototype.updateEnum=function(){N.updateEnum(this.constructor,"spriteFrameEnum",this.enum),this.spriteFrameEnum=this.enum[this._spriteFrameName]},n(e,[{key:"tag",get:function(){return this._tag},set:function(e){this._tag=e.trim()}},{key:"spriteFrameEnum",get:function(){return this._spriteFrameEnum},set:function(e){this._spriteFrameEnum=e;var t=this.enum[e];t&&t.length&&(this._spriteFrameName=t)}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e}}]),e}()).ENUM=Ue,q.IMAGE_EMBED="IMG_EMBED::",q.IMAGE_NAME="IMAGE_NAME::",t((j=q).prototype,"tag",[k],Object.getOwnPropertyDescriptor(j.prototype,"tag"),j.prototype),t(j.prototype,"spriteFrameEnum",[L],Object.getOwnPropertyDescriptor(j.prototype,"spriteFrameEnum"),j.prototype),t(j.prototype,"spriteFrame",[D],Object.getOwnPropertyDescriptor(j.prototype,"spriteFrame"),j.prototype),W=t(j.prototype,"_tag",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=t(j.prototype,"_spriteFrameName",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=t(j.prototype,"_spriteFrameEnum",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=t(j.prototype,"_spriteFrame",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(j.prototype,"enum",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ue}}),X=j))||X);e("LanguageConvertorPackage",(J=O("LanguageConvertorPackage"),Q=De(!0),$=Le({type:He}),ee=Le({type:Be}),te=Le({type:u,serializable:!0,visible:!0,displayName:"Show In Editor",group:"SETTING"}),ne=Le({displayName:"Prefix Sentence",group:"SETTING",visible:function(){return this.type!==Be.IMAGE_TEXT}}),ie=Le({type:c,visible:function(){return this.type!==Be.IMAGE_TEXT},serializable:!0,group:"SETTING"}),re=Le({type:Xe,visible:function(){return this.type!==Be.IMAGE_TEXT&&!!this.styleTemplate},displayName:"|__ Selected Style",group:"SETTING"}),oe=Le({visible:function(){return this.language==He.default&&this.type!==Be.IMAGE_TEXT},group:"SETTING"}),ae=Le({type:m,visible:function(){return this.type==Be.IMAGE_TEXT},group:"SETTING"}),le=Le({type:m,visible:function(){return this.type==Be.RICH_TEXT},group:"MAPPING"}),se=Le({type:[je],visible:function(){return this.type==Be.RICH_TEXT},serializable:!0,group:"MAPPING"}),pe=Le({visible:!1,serializable:!0}),ue=Le({visible:!1,serializable:!0}),ce=Le({visible:!1,serializable:!0}),me=Le({visible:!1,serializable:!0}),ge=Le({visible:!1,serializable:!0}),he=Le({visible:!1,serializable:!0}),de=Le({visible:!1,serializable:!0}),fe=Le({visible:!1,serializable:!0}),ye=Le({serializable:!0}),be=Le({readonly:!0}),ve=Le({serializable:!0,visible:!1}),J(Te=Q((ze=t((Ee=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"language",ze,o(t)),r(t,"prefix",Se,o(t)),r(t,"tags",_e,o(t)),r(t,"_defaultAtlas",Ce,o(t)),r(t,"_type",xe,o(t)),r(t,"_exampleText",Ae,o(t)),r(t,"_editMode",Me,o(t)),r(t,"_styleTemplate",Ie,o(t)),r(t,"_selectedStyle",Ne,o(t)),r(t,"_styleEnum",Re,o(t)),r(t,"_symbolAtlas",we,o(t)),r(t,"_key",Oe,o(t)),r(t,"saveContentSize",Fe,o(t)),t._forceRunning=!1,t._string="",t}i(t,e);var l=t.prototype;return l.setKey=function(e){this._key=e},l.translate=function(e){void 0===e&&(e=!1),this._forceRunning=this._forceRunning||e,this.onStartRender()},l.clear=function(){this.onDisableRender()},l.save=function(){},l.load=function(){},l.onLoad=function(){if(!this.saveContentSize||I){var t=this.node.getComponent(g)||this.node.addComponent(g);this.saveContentSize=t.contentSize.clone()}if(!this.exampleText||!this.exampleText.length){var n=this.getTargetComponentAs(h);n&&n.string&&n.string.length&&(this.exampleText=n.string)}this.updateStyleEnums(),this.updateTagEnums(),this.onDisableRender(),e.prototype.onLoad&&e.prototype.onLoad.call(this)},l.onStartRender=function(){this.languageInUse?this.onEnableRender():this.onDisableRender()},l.onDisableRender=function(){var e=this.node.getChildByName(He[this.language]);e&&e.removeFromParent()},l.onEnableRender=function(){switch(this.type){case Be.NORMAL_TEXT:this.renderNormalText();break;case Be.RICH_TEXT:this.renderRichText();break;case Be.IMAGE_TEXT:this.renderImageText()}this.disableTargetComponent()},l.disableTargetComponent=function(){var e=this.getTargetComponentAs(h);e&&(e.enabled=!1);var t=this.getTargetComponentAs(d);t&&(t.enabled=!1)},l.renderNormalText=function(e){if(void 0===e&&(e=null),this.key&&this.key.length){var t=e||this.getString(this.key);if(null!==t||void 0!==t){var n,i;if(t=this.prefix+t,this.styleTemplate)i=this.styleTemplate.data.getComponentsInChildren(h)[this.selectedStyle].node;var r=null==(n=this.getElements.call(this,h,this.node,this.selectedStyle,i).next())?void 0:n.value;r&&(r.enabled=!0,r.node.layer=f.Enum.UI_2D,this.styleTemplate||this.normalizeLabel(r),r.string=t,r.updateRenderData(!0),this.bubbleResize(r.node)),this._string=t}return t}},l.renderRichText=function(e){if(void 0===e&&(e=null),this.key&&this.key.length){var t=e||this.getString(this.key);null===t&&void 0===t||(t=this.prefix+t,this.normalizeRichText(t,this.node),this._string=t)}},l.renderImageText=function(e){if(void 0===e&&(e=null),this.key&&this.key.length){var t=e||this.getSpriteFrame(this.key);if(t){var n,i=null==(n=this.getElements(d,this.node).next())?void 0:n.value;if(i){i.enabled=!0,i.spriteFrame=t;var r=i.node.getComponent(g);this.node.getComponent(g).setContentSize(r.contentSize.clone())}}}},l.getNode=function(e,t,n){if(void 0===t&&(t=this.node),t.name==e)return t;var i=t.getChildByName(e);if(!i&&((i=new y).name=e,i.parent=t,i.layer=f.Enum.UI_2D,n)){var r=i.getChildByName(n.name);if(!r)(r=b(n)).layer=f.Enum.UI_2D,r.setPosition(new v(0,0,0)),i.addChild(r)}return i},l.getTargetComponentAs=function(e){return e&&T._isCCClass(e)?this.node.getComponent(e):null},l.getElements=function(e,t,n,i){var r=this;return void 0===n&&(n=0),a().mark((function o(){var l,s,p,u,c,m,h,d,y,v,z,S;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!e||!T._isCCClass(e)){o.next=31;break}if(!i){o.next=6;break}return l=r.getNode(He[r.language],t,i),o.delegateYield(r.getElements(e,l),"t0",4);case 4:o.next=31;break;case 6:if((s=t.getComponentsInChildren(e).filter((function(t){return t!==r.getTargetComponentAs(e)}))).length){o.next=18;break}if(p=r.getNode(He[r.language],t),t===r.node){o.next=15;break}return(u=r.getNode(Pe+t.children.length,t)).getComponent(e)||u.addComponent(e),o.delegateYield(r.getElements.call(r,e,t),"t1",13);case 13:o.next=16;break;case 15:return o.delegateYield(r.getElements.call(r,e,p),"t2",16);case 16:o.next=31;break;case 18:c=t.getComponent(g)||t.addComponent(g),r.saveContentSize||E("Unknow this._saveContentSize of node: "+r.node.getPathInHierarchy()),c.setContentSize(r.saveContentSize.clone()),m=s.length,h=n;case 23:return d=Boolean(h>=m),y=d?s[h%m]:s[h++],d?(v=y.node.parent,z=Pe+v.children.length,(S=v.getChildByName(z))||((S=b(y.node)).name=z,S.layer=f.Enum.UI_2D,S.parent=v),y=S.getComponent(e)):y.node.layer=f.Enum.UI_2D,o.next=29,y;case 29:o.next=23;break;case 31:case"end":return o.stop()}}),o)}))()},l.getSpriteFrame=function(e){return Ge.getSpriteFrame(this.key)||(this.defaultAtlas?this.defaultAtlas.getSpriteFrame(e):null)},l.getString=function(e){var t=e.match(/(?<=\{).+?(?=\})/g),n=e;if(t&&t.length)for(;t.length;){var i,r=null==(i=t.shift())?void 0:i.toString().trim();if(r&&r.length){var o=Ge.getRawText(r);o&&(n=n.replace("{"+r+"}",o))}}else n=Ge.getRawText(e);return n!==e?n:this.exampleText},l.updateTagEnums=function(){var e=this.generateSymbolAtlasEnum();this.tags&&this.tags.length&&this.tags.forEach((function(t){t.enum=e,t.updateEnum()}))},l.updateStyleEnums=function(){if(this.styleTemplate){var e={};this.styleTemplate.data.getComponentsInChildren(h).forEach((function(t,n){t&&t.node&&(e[t.node.name]=n)})),N.updateEnum(this,"selectedStyle",e)}},l.generateSymbolAtlasEnum=function(){return s(Ue)},l.generateRenderTexts=function(e){if(this.tags&&this.tags.length){var t=e;return this.tags.forEach((function(e,n,i){t=t.replace(e.tag,"♥"+(e.spriteFrame?je.IMAGE_EMBED+n:je.IMAGE_NAME+e._spriteFrameName)+"♥")})),t.split("♥")}return[e]},l.normalizeLayout=function(e){var t=this.getTargetComponentAs(h);if(t&&t.overflow!==h.Overflow.SHRINK){var n=e.getComponent(z);if(n)n.updateLayout();else{switch(n=e.addComponent(z),t.overflow){case h.Overflow.RESIZE_HEIGHT:n.type=z.Type.VERTICAL,n.alignHorizontal=!0;break;case h.Overflow.NONE:n.type=z.Type.HORIZONTAL,n.alignVertical=!0}n.resizeMode=z.ResizeMode.CONTAINER}}},l.removeLayout=function(e){var t,n;(null!=(t=n)?t:n=e.getComponent(z))&&n.destroy()},l.normalizeSize=function(e,t){void 0===t&&(t=this.saveContentSize);var n=e.getComponent(g)||e.addComponent(g),i=N.calculateAligning(n.contentSize.clone(),t.clone());return n.setContentSize(i),i},l.normalizeLabel=function(e){var t=this.getTargetComponentAs(h);if(t){e.fontSize=t.fontSize,e.lineHeight=t.lineHeight,e.horizontalAlign=t.horizontalAlign,e.verticalAlign=t.verticalAlign,e.font=t.font,e.fontFamily=t.fontFamily,e.useSystemFont=t.useSystemFont,e.cacheMode=t.cacheMode,e.color=t.color.clone(),e.enableWrapText=t.enableWrapText,e.overflow=h.Overflow.SHRINK,e.node.getComponent(g).setContentSize(this.saveContentSize.clone()),e.overflow=t.overflow;var n=t.getComponent(S);if(n){var i=e.getComponent(S)||e.addComponent(S);i.color=n.color.clone(),i.width=n.width}var r=t.getComponent(_);if(r){var o=e.getComponent(_)||e.addComponent(_);o.color=r.color.clone(),o.offset=r.offset.clone(),o.blur=r.blur}}else e.overflow=h.Overflow.SHRINK,e.enableWrapText=!1},l.normalizeRichText=function(e,t){var n,i,r=this.getElements(d,t,0,this.styleTemplate?this.styleTemplate:null),o=this.getElements(h,t,0,this.styleTemplate?this.styleTemplate:null),a=this.generateRenderTexts(e),l=!1,s=this.saveContentSize.clone();(null!=(n=i)?n:i=this.getTargetComponentAs(h))?(l=Boolean(i.overflow!==h.Overflow.NONE),s.y=Math.min(this.saveContentSize.y,i.lineHeight)):null!=i||(i=this.getTargetComponentAs(d)),this.normalizeLayout(t),l?this.renderRichTextMultiline(t,a,o,r,s):this.renderRichTextSingleLine(t,a,o,r)},l.hasSpriteFrameName=function(e){return-1!==e.indexOf(je.IMAGE_NAME)},l.hasEmbedImage=function(e){return-1!==e.indexOf(je.IMAGE_EMBED)},l.renderRichTextSingleLine=function(e,t,n,i){var r=this;t.forEach((function(e,t){if(r.hasSpriteFrameName(e)){var o,a=null==(o=i.next())?void 0:o.value;if(a){var l=e.replace(je.IMAGE_NAME,"");a.sizeMode=d.SizeMode.RAW,a.spriteFrame=r.symbolAtlas.getSpriteFrame(l),a.sizeMode=d.SizeMode.CUSTOM,r.normalizeSize(a.node)}}else if(r.hasEmbedImage(e)){var s,p=null==(s=i.next())?void 0:s.value;if(p){var u=parseInt(e.replace(je.IMAGE_EMBED,"")),c=r.tags[u];p.sizeMode=d.SizeMode.RAW,p.spriteFrame=c.spriteFrame,p.sizeMode=d.SizeMode.CUSTOM,r.normalizeSize(p.node)}}else{var m,g=null==(m=n.next())?void 0:m.value;g&&(g.string=e)}}))},l.renderRichTextMultiline=function(e,t,n,i,r){var o=this;if(t){if(t.length){var a=this.getNode(He[this.language],e,this.styleTemplate?this.styleTemplate:null),l=a.getComponent(z)||a.addComponent(z);l.type=z.Type.GRID,l.resizeMode=z.ResizeMode.CONTAINER,l.startAxis=z.AxisDirection.HORIZONTAL,l.verticalDirection=z.VerticalDirection.TOP_TO_BOTTOM,l.horizontalDirection=z.HorizontalDirection.LEFT_TO_RIGHT,l.constraint=z.Constraint.NONE}var s=this.saveContentSize.x,p=0,u=0;t.forEach((function(e,t){if(o.hasSpriteFrameName(e)){var a,l=null==(a=i.next())?void 0:a.value;if(l){var c=e.replace(je.IMAGE_NAME,"");l.sizeMode=d.SizeMode.RAW,l.spriteFrame=o.symbolAtlas.getSpriteFrame(c),l.sizeMode=d.SizeMode.CUSTOM;var m=o.normalizeSize(l.node,r);p+=m.x,l.node.setSiblingIndex(u),u++}}else if(o.hasEmbedImage(e)){var g,h=null==(g=i.next())?void 0:g.value;if(h){var f=parseInt(e.replace(je.IMAGE_EMBED,"")),y=o.tags[f];h.sizeMode=d.SizeMode.RAW,h.spriteFrame=y.spriteFrame,h.sizeMode=d.SizeMode.CUSTOM;var b=o.normalizeSize(h.node,r);p+=b.x,h.node.setSiblingIndex(u),u++}}else{o.splitTextToLineLabels(e,n,p).forEach((function(e){e&&(p+=e.contentWidth,e.node.setSiblingIndex(u),u++)}))}p%=s}))}},l.splitTextToLineLabels=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=[]);var r=i.length?i[i.length-1]:null;if(r||(r=t.next().value,this.normalizeLabel(r),r.overflow=h.Overflow.NONE,r.string="",i.push(r)),C.isString(e)){var o=this.saveContentSize.x,a=e,l=r.string,s=r.contentWidth;r.string=l+" "+a,r.updateRenderData(!0);var p=r.contentWidth;if(p+n>o){r.string=l;var u=a.split(/\s/g),c=Boolean(1==u.length);if(c&&Number(p-s)>o)u=a.split(""),E("is a long word");else if(c){c&&u[0]&&1==u[0].length&&(r.string=l),r.updateRenderData(!0),n=0,r=t.next().value,this.normalizeLabel(r),r.overflow=h.Overflow.NONE,r.string="",i.push(r)}else r.updateRenderData(!0),n+=s;return this.splitTextToLineLabels(u,t,n,i)}}else if(Array.isArray(e))for(var m=e;m.length;){var g=m.shift();i=this.splitTextToLineLabels(g,t,n,i)}else x("Do not support type of rawText "+C.getClassName(e));return i},l.bubbleResize=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=this.node),e&&n.parent&&e!==n.parent){var i=e.getComponent(g)||e.addComponent(g);i.contentSize;t?i.setContentSize(t):this.normalizeSize(e),this.bubbleResize(e.parent,i.contentSize.clone())}},n(t,[{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"editMode",get:function(){return this._editMode},set:function(e){this._editMode=e,this.onStartRender()}},{key:"styleTemplate",get:function(){return this._styleTemplate},set:function(e){this._styleTemplate!==e&&(this._styleTemplate=e,this.updateStyleEnums(),this.onStartRender())}},{key:"selectedStyle",get:function(){return this._selectedStyle},set:function(e){this._selectedStyle=e}},{key:"exampleText",get:function(){return this._exampleText},set:function(e){this._exampleText=e}},{key:"defaultAtlas",get:function(){return this._defaultAtlas},set:function(e){}},{key:"symbolAtlas",get:function(){return this._symbolAtlas},set:function(e){this._symbolAtlas=e,this.updateTagEnums()}},{key:"key",get:function(){return this._key}},{key:"string",get:function(){return this._string},set:function(e){e=null==e?"":e.toString(),this._string!==e&&(this.onDisableRender(),this._string=this.renderNormalText(e),this.disableTargetComponent())}},{key:"languageInUse",get:function(){return Ge.language==He[this.language]||this._forceRunning}}]),t}(A)).prototype,"language",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return He.en}}),t(Ee.prototype,"type",[ee],Object.getOwnPropertyDescriptor(Ee.prototype,"type"),Ee.prototype),t(Ee.prototype,"editMode",[te],Object.getOwnPropertyDescriptor(Ee.prototype,"editMode"),Ee.prototype),Se=t(Ee.prototype,"prefix",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(Ee.prototype,"styleTemplate",[ie],Object.getOwnPropertyDescriptor(Ee.prototype,"styleTemplate"),Ee.prototype),t(Ee.prototype,"selectedStyle",[re],Object.getOwnPropertyDescriptor(Ee.prototype,"selectedStyle"),Ee.prototype),t(Ee.prototype,"exampleText",[oe],Object.getOwnPropertyDescriptor(Ee.prototype,"exampleText"),Ee.prototype),t(Ee.prototype,"defaultAtlas",[ae],Object.getOwnPropertyDescriptor(Ee.prototype,"defaultAtlas"),Ee.prototype),t(Ee.prototype,"symbolAtlas",[le],Object.getOwnPropertyDescriptor(Ee.prototype,"symbolAtlas"),Ee.prototype),_e=t(Ee.prototype,"tags",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ce=t(Ee.prototype,"_defaultAtlas",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(Ee.prototype,"_type",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ae=t(Ee.prototype,"_exampleText",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Me=t(Ee.prototype,"_editMode",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(Ee.prototype,"_styleTemplate",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(Ee.prototype,"_selectedStyle",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Re=t(Ee.prototype,"_styleEnum",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(Ee.prototype,"_symbolAtlas",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=t(Ee.prototype,"_key",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(Ee.prototype,"key",[be],Object.getOwnPropertyDescriptor(Ee.prototype,"key"),Ee.prototype),Fe=t(Ee.prototype,"saveContentSize",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=Ee))||Te)||Te))}}}));

System.register("bundle://common/_virtual/LobbyPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RemoteScriptImporter.ts","./StartActions.ts","./ServiceRequestConfig.ts"],(function(e){var t,n,o,r,i,a,s,c,u,l,p,h,b,d,f,m,y,v,g,L,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Color,l=e.SpriteFrame,p=e.sys,h=e.log,b=e.error,d=e.UIOpacity,f=e.Tween,m=e.tween},function(e){y=e.importRemoteCCClass,v=e.remoteCCClass},function(e){g=e.MainGameAction,L=e.API_ACTION},function(e){R=e.ServiceRequestConfig}],execute:function(){var I,w,P,C,U,E,T,k,x,B,S;s._RF.push({},"edbd7l362FN0pEREglR0Gq1","LobbyPopup",void 0);c.ccclass;var N=c.property,_=y("GamifyComponent"),A=function(e){return e[e.INIT=0]="INIT",e[e.SETUP_COMPLETED=1]="SETUP_COMPLETED",e}(A||{});e("LobbyPopup",(I=v("LobbyPopup"),w=N({type:u}),P=N({type:l}),C=N({serializable:!0}),U=N({type:R}),I((k=t((T=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"buttonColor",k,r(t)),o(t,"homeIcon",x,r(t)),o(t,"_homeIcon",B,r(t)),o(t,"serviceRequest",S,r(t)),t.servieNetworkName=null,t.fillImgWrapper=null,t.lobbyURL=void 0,t}n(t,e);var s=t.prototype;return s.onData=function(e,t){var n,o,r,i,a,s=t.type,c=t.payload;switch(s){case L.AUTH_RESULT:h("auth result");case g.INIT:if(c&&c.apiService&&(this.servieNetworkName=c.apiService),a=this.getAPIData(this.servieNetworkName),e.enableLobby=!p.isMobile&&a&&(null==(n=a)?void 0:n.config)&&("true"===(null==(o=a)||null==(o=o.config)?void 0:o.homeButton)||!0===(null==(r=a)||null==(r=r.config)?void 0:r.homeButton)),e.enableLobby){var u=new URLSearchParams(window.location.search);e.lobbyURL=u.get("redirectUrl"),e.lobbyURL&&this.isURLValid(e.lobbyURL)?(e.lobbyURL=decodeURIComponent(e.lobbyURL),this.lobbyURL=e.lobbyURL,e.status=A.SETUP_COMPLETED):e.status=A.INIT,this.render()}case this.serviceRequest.ResponseAction:a=this.getAPIData(this.servieNetworkName),e.lobbyURL=null==(i=a)||null==(i=i.config)?void 0:i.lobbyURL,this.lobbyURL=e.lobbyURL,e.status=A.SETUP_COMPLETED,this.render()}},s.onRender=function(){var e=i(a().mark((function e(t,n,o){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.status,e.next=e.t0===A.INIT?3:e.t0===A.SETUP_COMPLETED?5:9;break;case 3:return this.serviceRequest.request(),e.abrupt("break",9);case 5:return this.hidePopup(),this.displayHomeButton(),this.setButtonColor(this.buttonColor.toString()),e.abrupt("break",9);case 9:t();case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,o){return e.apply(this,arguments)}}(),s.getAPIData=function(e){if(e){var t=this.getOtherState(e);return t||(b("[Lobby Popup]: Không có hoặc setup nhầm service"),null)}return b("[Lobby Popup] Chưa khai báo service name ! Có thể do StartGameAction.INIT chưa được dispatch."),null},s.isURLValid=function(e){return null!=e&&null!=e&&"#"!=e&&e.length>0},s.showPopup=function(){var e=i(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),n=this.node.getComponent(d)||this.node.addComponent(d),this.node.children.forEach((function(e){e.active=!0})),!t){e.next=9;break}return f.stopAllByTarget(this.node),e.next=7,new Promise((function(e){m(n).set({opacity:0}).to(.4,{opacity:255}).call(e).start()}));case 7:e.next=10;break;case 9:n.opacity=255;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.hidePopup=function(){var e=i(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),!t){e.next=5;break}return f.stopAllByTarget(this.node),e.next=5,new Promise((function(e){var t=n.node.getComponent(d)||n.node.addComponent(d);m(t).set({opacity:255}).to(.4,{opacity:0}).call(e).start()}));case 5:this.node.children.forEach((function(e){e.active=!1}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.displayHomeButton=function(){if(this.homeIcon){var e=document.createElement("style");e.innerText=".lobbyBtn{width:60px;height:60px;position:absolute;right:0;top:0;margin-top:20px;margin-right:20px;border-radius:50%;background-color:#763a00;padding:0;border:0;}.lobbyBtn:hover{background-color:#fca14c;}.lobbyBtn:active{background-color:#4b4b4b;}",document.head.appendChild(e),this.fillImgWrapper=document.createElement("button"),this.fillImgWrapper.className="lobbyBtn";var t=document.createElement("img");t.className="lobbyBtnImg",t.src=this.homeIcon.texture.toString(),t.addEventListener("click",this.onHomeButtonPressed.bind(this)),this.fillImgWrapper.appendChild(t),document.body.appendChild(this.fillImgWrapper)}},s.setButtonColor=function(e){if(this.isLobbyEnabled&&this.fillImgWrapper){if(e.match(/[0-9A-Fa-f]{6}/g)){var t=document.createElement("style");t.innerText=".lobbyBtn_1{background-color:"+e+"}",document.head.appendChild(t),this.fillImgWrapper.classList.add("lobbyBtn_1")}else h("Color string is invalid - ",e)}},s.onHomeButtonPressed=function(){var e=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showPopup(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.onCancelButtonPressed=function(){var e=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.hidePopup(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.onOKButtonPressed=function(){var e=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.hidePopup(!0),this.lobbyURL&&this.isURLValid(this.lobbyURL)?window.location.replace(this.lobbyURL):b("Invalid redirect URL "+this.lobbyURL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(_)).prototype,"buttonColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),x=t(T.prototype,"homeIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(T.prototype,"_homeIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(T.prototype,"serviceRequest",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=T))||E));s._RF.pop()}}}));

System.register("bundle://common/_virtual/LocalizationController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamifyComponent.ts","./Helper.ts"],(function(e){var t,n,a,r,o,i,u,s,c,l,f,g,p,d,h,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.extends,i=e.createClass,u=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){c=e._decorator,l=e.CCString,f=e.Label,g=e.resources,p=e.SpriteAtlas,d=e.JsonAsset},function(e){h=e.GamifyComponent},function(e){x=e.Helper}],execute:function(){var m,v,y,L,w,A,R,T,I,k=c.ccclass,P=c.property,_=e("SupportedLanguages",["en","cs","da","de","el","es","es_la","fi","fr","hu","it","nl","no","pl","pt","pt_br","ro","sk","sv","tr","uk_ua","bg","id","ja","ko","ru","th","tzh","vi","zh"]),b="text_atlas",S="text";e("LocalizationController",(m=k("LocalizationController"),v=P({group:"Setup",displayName:"Auto Replace Mode"}),y=P({type:[l],group:"Setup",visible:function(){return this.isAutoReplaceMode}}),m(((I=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,a(t,"isAutoReplaceMode",A,r(t)),a(t,"namePatternList",R,r(t)),a(t,"localizedPath",T,r(t)),t}n(t,e),t.setLanguage=function(e){this._language=e},t.setText=function(e,t){e.spriteFrame=null},t.getRawText=function(e){return t.textInfo&&t.textInfo[e]?t.textInfo[e]:e},t.getSpriteFrame=function(e){return t.textAtlas?t.textAtlas.getSpriteFrame(e):null},t.addTextInfo=function(e,n){void 0===n&&(n=!0),t.textInfo=n?o({},t.textInfo,e):o({},e,t.textInfo)},t.addJSONPackage=function(e,n,a){void 0===a&&(a=!0),t.jsonPackages.has(e)||(t.textInfo=a?o({},t.textInfo,n):o({},n,t.textInfo),t.jsonPackages.add(e))};var c=t.prototype;return c.onInit=function(){var e=this,n=x.getUrlVars(),a=this.verifyLanguage(n.language||t.language);t.setLanguage(a),this.loadTextResources(a).then((function(){e.isAutoReplaceMode&&e.autoReplaceRawText()}))},c.onStoreRegisted=function(e,n){t.textInfo&&this.dispatch({type:t.ACTION.LANGUAGE_PACKAGE_LOADED},this.getStateName(),n.sender)},c.loadTextResources=function(){var e=u(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=null),t.textInfo){e.next=4;break}return e.next=4,Promise.all([this.imageLoading(n),this.allTextLoading(n)]);case 4:return e.next=6,this.onReady();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.allTextLoading=function(){var e=u(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=null),e.next=3,Promise.all([this.commonTextLoading(t),this.gameTextLoading(t),this.customTextLoading(t)]);case 3:return e.next=5,this.onTextReady(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.getLanguageURL=function(e,t){return this.localizedPath+"/"+e+"/"+t},c.imageLoading=function(){var e=u(s().mark((function e(n){var a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var r=a.getLanguageURL(n,b);r&&a.languageBundle.load(r,p,(function(r,o){r||(n!=_[0]&&a.languageBundle.release(_[0]+"/"+b),t.textAtlas=o),e()}))}));case 2:return e.next=4,this.onImageTextReady(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.commonTextLoading=function(){var e=u(s().mark((function e(n){var a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var r=a.getLanguageURL(n,"common");r&&a.languageBundle.load(r,(function(n,a){n||(a&&a instanceof d?t.addTextInfo(a.json,!1):t.addTextInfo(JSON.parse(a.toString()),!1)),e()}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.gameTextLoading=function(){var e=u(s().mark((function e(n){var a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var r=a.getLanguageURL(n,S);r&&a.languageBundle.load(r,(function(r,o){r||(n!=_[0]&&a.languageBundle.release(_[0]+"/"+S),o&&o instanceof d?t.addTextInfo(o.json,!1):t.addTextInfo(JSON.parse(o.toString()))),e()}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.customTextLoading=function(){var e=u(s().mark((function e(n){var a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){if("th"==n){var r=a.getLanguageURL(n,"font");r&&a.languageBundle.load(r,(function(n,a){n||(t.thaiFont=a),e()}))}else e()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.verifyLanguage=function(e){return-1!=_.indexOf(e)?e:t.language},c.onImageTextReady=function(){var e=u(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.onTextReady=function(){var e=u(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.onReady=function(){var e=u(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._isReady=!0,this.dispatch({type:t.ACTION.LANGUAGE_PACKAGE_LOADED});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.autoReplaceRawText=function(){var e=this;this.namePatternList.length<=0||this.node.walk(void 0,(function(n){if(e.namePatternList.some((function(e){return n.name.includes(e)}))){var a=n.getComponent(f);if(a){"th"==t.language&&(a.font=t.thaiFont,a.cacheMode=f.CacheMode.NONE);var r=t.textInfo[a.string];r&&(a.string=r)}}}))},i(t,[{key:"currentLanguage",get:function(){return t.language}},{key:"initialState",get:function(){return{loaded:!1}}},{key:"languageBundle",get:function(){return g}}],[{key:"language",get:function(){return this._language}},{key:"isReady",get:function(){return this._isReady}}]),t}(h)).ACTION={LANGUAGE_PACKAGE_LOADED:"language_package_loaded"},I.textInfo=null,I.jsonPackages=new Set,I.thaiFont=null,I._language="en",I._isReady=!1,I.textAtlas=null,A=t((w=I).prototype,"isAutoReplaceMode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=t(w.prototype,"namePatternList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=t(w.prototype,"localizedPath",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"localizes"}}),L=w))||L))}}}));

System.register("bundle://common/_virtual/MechanicDispatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Helper.ts","./RenderQueueDispatcher.ts"],(function(e){var t,i,n,a;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e._decorator},function(e){n=e.Helper},function(e){a=e.RenderQueueDispatcher}],execute:function(){var c,r=i.ccclass;e("MechanicDispatcher",r("MechanicDispatcher")(c=function(e){function i(t){var i;return(i=e.call(this,t)||this)._relativeScenarioMap=null,i._configActionMap=null,i._relativeScenarioMap=new Map,i._configActionMap=new Map,i}t(i,e);var a=i.prototype;return a.registerActionScenario=function(e,t){var i=e.type;if(i){if(this.isDispatching()&&this._pendingAction){var n=this.getRenderTask(i);n.map=this.applyActionScenario(t,n.map||Object.create(null))}else{var a=this._relativeScenarioMap.get(i);a||(a=new Set),a.add(t),this._relativeScenarioMap.set(i,a)}this.registerConfigAction(e)}},a.applyActionScenario=function(e,t){for(var i=e.slice();i.length;){var n=i.shift(),a=i[0];if(a){for(var c=this.searchAllRegisterNames(n),r=this.searchAllRegisterNames(a),o=void 0;c.length;){o=c.shift();var s=this.findMapName(o);t[s]=t[s]||[]}if(o)for(var p=0;p<r.length;p++){var l=r[p];o&&l&&this._applyRenderBefore([o,l],t)}}}return t},a.registerConfigAction=function(e,t){var i=e.type;if(i){if(e.payload){var n=this._configActionMap.get(i)||Object.create(null);e.payload=n.payload?Object.assign(e.payload,n.payload):e.payload}this.isDispatching()&&this._pendingAction?this._pendingAction=Object.assign(this._pendingAction,e):this._configActionMap.set(i,e)}},a.removeConfigAction=function(e){var t=e.type;t&&this._configActionMap.delete(t)},a.removeDefaultActionScenerio=function(e){var t=e.type;t&&(this._relativeScenarioMap.delete(t),this._configActionMap.delete(t))},a.hasScenario=function(e){var t=e||this._pendingAction;if(t){var i=t.type;return!!this._relativeScenarioMap.get(i)}},a._generateMechanicRelativeMap=function(e){var t=this,i=Object.create(null),n=e.type;if(n){var a=this._relativeScenarioMap.get(n);a&&a.forEach((function(e){t.applyActionScenario(e,i)}))}return i},a._startDispatching=function(t){var i=this._configActionMap.get(t.type);i&&(i.receiver=t.receiver.length?(i.receiver||[]).concat(t.receiver):i.receiver,t=Object.assign(t,i)),e.prototype._startDispatching.call(this,t)},a._stopDispatching=function(){var t=this._generateMechanicRelativeMap(this._pendingAction);if(!n.areEqual(this._nullObject,t)){var i=this._pendingAction?this._pendingAction.type:null,a=this.getRenderTask(i);a.map=Object.assign(a.map,t)}e.prototype._stopDispatching.call(this)},a.destroy=function(){this._relativeScenarioMap=null,this._configActionMap=null,e.prototype.destroy.call(this)},i}(a))||c)}}}));

System.register("bundle://common/_virtual/MultilingualController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MultilingualConvertor.ts","./RemoteScriptImporter.ts","./LocalizationController.ts"],(function(e){var t,n,r,o,i,a,l,u,c,s,p,g,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass,a=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){u=e._decorator,c=e.Node},function(e){s=e.MultilingualConvertor},function(e){p=e.importRemoteCCClass,g=e.remoteCCClass},function(e){f=e.LocalizationController}],execute:function(){var d,h,y,m,C,z,v,L,b=u.property,w=u.executeInEditMode;p("Helper"),e("MultilingualController",(d=g("MultilingualController"),h=w(!0),y=b({type:[c],serializable:!0,group:"Setup"}),m=b({displayName:"Run On Load",tooltip:"Note: If true, localization will run before the plugin is initialized. \n This will create annoying warnings when the default language package does not have words to translate."}),d(C=h((v=t((z=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"localizingNodes",v,o(t)),r(t,"runOnLoad",L,o(t)),t}n(t,e);var u=t.prototype;return u.getLanguageURL=function(t,n){return e.prototype.getLanguageURL.call(this,t,n)},u.onReady=function(){var t=a(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.startLocalizing();case 2:return t.next=4,e.prototype.onReady.call(this);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.startLocalizing=function(){var e=a(l().mark((function e(t){var n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.localizingNodes&&this.localizingNodes.forEach((function(e){if(e){var r=e.getComponent(s)||e.addComponent(s);n.runOnLoad||t?(r.enabled=!0,r.translate()):r.enabled=!1}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i(t,[{key:"languageBundle",get:function(){return e.prototype.languageBundle}}]),t}(f)).prototype,"localizingNodes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(z.prototype,"runOnLoad",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=z))||C)||C))}}}));

System.register("bundle://common/_virtual/MultilingualConvertor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageConvertorPackage.ts","./ParasiteComponent.ts","./RemoteScriptImporter.ts"],(function(e){var t,n,i,r,o,a,s,l,p,u,c,g,y,_,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){a=e._decorator,s=e.Enum,l=e.Sprite,p=e.Label},function(e){u=e.LanguageConvertorPackage,c=e.LangEnum},function(e){g=e.override,y=e.default},function(e){_=e.importRemoteCCClass,h=e.remoteCCClass}],execute:function(){a.ccclass;var d,k,f,E,m,b,S,K,P,v,I,C,M,L,T=a.property,A=a.executeInEditMode,N=(_("GameUtils"),_("LocalizationController")),R=e("MultilingualKeyMode",function(e){return e[e.STATIC_KEY=0]="STATIC_KEY",e[e.NODE_NAME_IS_KEY=1]="NODE_NAME_IS_KEY",e[e.LABEL_STRING_IS_KEY=2]="LABEL_STRING_IS_KEY",e[e.SPRITE_FRAME_IS_KEY=3]="SPRITE_FRAME_IS_KEY",e}({}));e("MultilingualConvertor",(d=h("MultilingualConvertor (Label or Sprite Plugin)"),k=A(!0),f=T({type:s(R),displayName:"Translation Mode"}),E=T({displayName:"Key",visible:function(){return this.keyMode==R.STATIC_KEY}}),m=T({serializable:!0,visible:!1}),b=T({serializable:!0,visible:!1}),S=T({serializable:!0,visible:!1}),K=T({serializable:!0,visible:!1}),d(P=k((t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"_translateInEditor",I,r(t)),i(t,"_isAutoKey",C,r(t)),i(t,"_key",M,r(t)),i(t,"_keyMode",L,r(t)),t._langPackage=void 0,t._pendingString=null,t}n(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this);var t=this.node.getComponent(u);t||((t=this.node.addComponent(u)).setKey(this.key),t.language=c.default)},a.start=function(){var e=this;this.node.getComponents(u).forEach((function(t){t&&t.setKey(e.key)})),this._pendingString&&(this._langPackage&&(this._langPackage.string=this._pendingString),this._pendingString=null)},a.onEnable=function(){this.autoUpdateKey(),N.isReady&&this.node.active&&this.translate()},a.translate=function(){if(!this._langPackage){var e,t=this.node.getComponents(u).find((function(t){return t.language==c.default&&(e=t),t.clear(),t.languageInUse}));this._langPackage=t||e,this._langPackage.setKey(this.key)}this._langPackage.translate(!0)},a.autoUpdateKey=function(){var e,t;switch(this.keyMode){case R.NODE_NAME_IS_KEY:this._key=this.node?this.node.name:this._key;break;case R.LABEL_STRING_IS_KEY:var n;(null!=(e=n)?e:n=this.node.getComponent(p))&&(this._key=n.string&&n.string.length?n.string:this._key);break;case R.SPRITE_FRAME_IS_KEY:var i;(null!=(t=i)?t:i=this.node.getComponent(l))&&(this._key=i.spriteFrame?i.spriteFrame.name:this._key)}this.syncKeyToPackages()},a.syncKeyToPackages=function(){var e=this;this.node.getComponents(u).forEach((function(t){t&&t.setKey(e.key)}))},o(t,[{key:"keyMode",get:function(){return this._keyMode},set:function(e){this._keyMode=e,this.autoUpdateKey()}},{key:"key",get:function(){return this._key},set:function(e){this._key=e,this.syncKeyToPackages()}},{key:"spriteFrame",set:function(e){var t=this.super.spriteFrame;this.super.spriteFrame=e,e!==t&&(this.autoUpdateKey(),N.isReady&&this.node.active&&this.translate())}},{key:"string",get:function(){return this._langPackage&&this._langPackage.string.length?this._langPackage.string:this.super.string},set:function(e){e=null==e?"":e.toString(),this.super.string=e,this._langPackage?this._langPackage.string=e:this._pendingString=e}}]),t}(y)).prototype,"keyMode",[f],Object.getOwnPropertyDescriptor(v.prototype,"keyMode"),v.prototype),t(v.prototype,"key",[E],Object.getOwnPropertyDescriptor(v.prototype,"key"),v.prototype),I=t(v.prototype,"_translateInEditor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=t(v.prototype,"_isAutoKey",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=t(v.prototype,"_key",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=t(v.prototype,"_keyMode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.NODE_NAME_IS_KEY}}),t(v.prototype,"spriteFrame",[g],Object.getOwnPropertyDescriptor(v.prototype,"spriteFrame"),v.prototype),t(v.prototype,"string",[g],Object.getOwnPropertyDescriptor(v.prototype,"string"),v.prototype),P=v))||P)||P))}}}));

System.register("bundle://common/_virtual/ParasiteComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,s,i,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.createClass},function(e){o=e._decorator,s=e.error,i=e.Component,u=e.js}],execute:function(){var a,p,l,c;e("override",(function(e,t,r){if("__preload"===t)return void s("Do not support overriding "+t+" method");var n=e[v];n||(n=e[v]=new Set);n.has(t)||n.add(t)}));var f=o.ccclass,d=o.property,v=e("OverrideMethodNameMap",Symbol()),h=Symbol(),y=Symbol(),b=Symbol(),g=Symbol(),_=Symbol(),m=Symbol();e("default",(a=f("ParasiteComponent"),p=d({displayName:"Extends",readonly:!0}),a((t((c=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._$id=0,t._$super=null,t._$superName="",t.super=null,t}r(t,e);var o=t.prototype;return o.onLoad=function(){this[y](),this[b](),e.prototype.onLoad&&e.prototype.onLoad.call(this)},o.onDestroy=function(){var e=this;this.node.getComponents(i).forEach((function(t){t.super&&t!==e&&t[y]()})),this._$super=null,this.super&&delete this.super},o[h]=function(e){return!!e},o[y]=function(){var e=this;if(this.node){var r=this.node.components,n=r.length,o=null,s=null,i=r.findIndex((function(r,i,a){var p=e[h](r),l=null;if(p){var c=u.isChildClassOf(r.constructor,t);o=c?o:r;for(var f=i;f<n-1&&(l=a[++f],!e[h](l)););s=l&&!c?l:s}return p&&l&&l==e}));this._$id=i+1;var a=r[i];if(a&&(this._$super=a,this._$superName=u.getClassName(a)),this._$super){var p=this[v];p&&p.forEach((function(t){var r=u.getPropertyDescriptor(o,t);if(r){var n=e[m](t),i=u.getPropertyDescriptor(e,t);s&&!Object.prototype.hasOwnProperty.call(s,n)&&Object.defineProperty(s,n,r),i&&s?r.get||r.set?(delete o[t],u.getset(o,t,i.get?i.get.bind(e):r.get.bind(o),i.set?i.set.bind(e):r.set.bind(o),i.enumerable,i.configurable)):void 0!==r.value&&"function"==typeof r.value?u.value(o,t,i.value?i.value.bind(e):r.value.bind(o),i.writable||r.writable,i.enumerable||r.enumerable):(i.get||i.set)&&u.getset(o,t,i.get?i.get.bind(e):function(){return s[n]},i.set?i.set.bind(e):function(e){s[n]=e},i.enumerable,i.configurable):delete e[n]}}))}}},o[b]=function(){var e=this;if(this._$super){var t=new Proxy(this,{get:function(t,r){return e[g](t,r)},set:function(t,r,n){return e[_](t,r,n)}});this.super&&delete this.super,Object.defineProperty(this,"super",{get:function(){return t}})}},o[g]=function(e,t){if(e&&e._$super){var r=this[m](t),n=u.getPropertyDescriptor(e,r);if(n&&n.get)return n.get.call(e._$super);if(n&&n.value&&"function"==typeof n.value)return n.value.bind(e._$super);var o=u.getPropertyDescriptor(e._$super,t);return o&&o.get?o.get.call(e._$super):o&&Object.prototype.hasOwnProperty.call(o,"value")?o.value:this[g](e._$super,t)}},o[_]=function(e,t,r){if(void 0===r&&(r=void 0),!e||!e._$super)return!1;var n=this[m](t),o=u.getPropertyDescriptor(e,n);if(o&&o.set)return o.set.call(e._$super,r),!0;var s=u.getPropertyDescriptor(e._$super,t);return s&&s.set?(s.set.call(e._$super,r),!0):s&&Object.prototype.hasOwnProperty.call(s,"value")?(e._$super[t]=r,!0):this[_](e._$super,t,r)},o[m]=function(e){return"__$super::"+e+"__"},n(t,[{key:"superName",get:function(){return this._$superName}}]),t}(i)).prototype,"superName",[p],Object.getOwnPropertyDescriptor(c.prototype,"superName"),c.prototype),l=c))||l))}}}));

System.register("bundle://common/_virtual/PlayerInboxButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FloatButton.ts","./SpineClip.ts"],(function(t){var n,o,e,r,i,a,c,s,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.createClass,r=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){a=t.cclegacy,c=t._decorator},function(t){s=t.FloatButton},function(t){p=t.SpineClip}],execute:function(){var u,l,y,f;a._RF.push({},"6ca095XHAlPBbJRPCyiB/mX","PlayerInboxButton",void 0);var h=c.ccclass,m=c.property;t("PlayerInboxButton",(u=h("PlayerInboxButton"),l=m({type:p}),u((n((f=function(t){function n(){for(var n,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return(n=t.call.apply(t,[this].concat(e))||this)._animation=void 0,n}o(n,t);var a=n.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),this.animation||(this.animation=this.getComponent(p))},a.onPress=function(){var n=r(i().mark((function n(o){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.animation.play(1);case 2:t.prototype.onPress.call(this,o);case 3:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),a.onEnable=function(){this.animation.play(0)},e(n,[{key:"animation",get:function(){return this._animation},set:function(t){this._animation=t}}]),n}(s)).prototype,"animation",[l],Object.getOwnPropertyDescriptor(f.prototype,"animation"),f.prototype),y=f))||y));a._RF.pop()}}}));

System.register("bundle://common/_virtual/PlayerInboxItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,a,s,c,l,u,h,p;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,r=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,c=t.Label,l=t.Eventify,u=t.Component,h=t.Sprite,p=t.Button}],execute:function(){var f,d,m,v,T,g,y,b;a._RF.push({},"f95f6ZLWeVMD4HwlvUWwEZ7","PlayerInboxItem",void 0);var E=s.ccclass,D=s.property;t("PlayerInboxItem",(f=E("PlayerInboxItem"),d=D({type:c}),m=D({type:c}),f(((b=function(t){function r(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"rewardTitle",g,o(e)),n(e,"expireTimeTitle",y,o(e)),e.data=void 0,e._isActive=!0,e}e(r,t);var a=r.prototype;return a.update=function(t){if(this.data&&this.data.claimBefore&&this.isActive){var e=this.data.claimBefore.getTime()-Date.now();this.expireTimeTitle.string=this.convertMsToTime(e),this.isActive=!this.data.isRead&&e>1e3}},a.render=function(t){this.data=t,this.rewardTitle.string=t.count+this.rewardTitle.string},a.onClaimReward=function(t){this.emit(r.EVENT.SELECTED,this.data)},a.updateExpireTime=function(){},a.convertMsToTime=function(t){if(!this.isActive)return"00d:00h:00m:00s";var e=Math.floor(t/1e3),i=Math.floor(e/60),r=Math.floor(i/60),n=Math.floor(r/24);return i%=60,r%=24,(e%=60)<0?"00d:00h:00m:00s":this.padTo2Digits(n)+"d:"+this.padTo2Digits(r)+"h:"+this.padTo2Digits(i)+"m:"+this.padTo2Digits(e)+"s"},a.padTo2Digits=function(t){return t.toString().padStart(2,"0")},a.onDestroy=function(){this.targetOff(this)},i(r,[{key:"isActive",get:function(){return this._isActive},set:function(t){var e=this;this._isActive!==t&&(this.getComponentsInChildren(h).forEach((function(t){return t.grayscale=!e._isActive})),this.getComponentInChildren(p).interactable=this._isActive);this._isActive=t}}]),r}(l(u))).EVENT={SELECTED:"selected_item_event"},g=r((T=b).prototype,"rewardTitle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(T.prototype,"expireTimeTitle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=T))||v));a._RF.pop()}}}));

System.register("bundle://common/_virtual/PlayerInboxNetwork.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WebSocketComponent.ts","./StartActions.ts","./PlayerInboxType.ts"],(function(t){var e,r,n,o,a,i,c,s,u;return{setters:[function(t){e=t.inheritsLoose,r=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){o=t.cclegacy,a=t._decorator,i=t.error},function(t){c=t.WebSocketComponent},function(t){s=t.MainGameAction},function(t){u=t.PlayerInboxAction}],execute:function(){var p;o._RF.push({},"5863bfdYRBLcqKaGnj3TxV8","PlayerInboxNetwork",void 0);var h=a.ccclass,l=(a.property,function(t){return t[t.INIT=0]="INIT",t[t.READY=1]="READY",t}(l||{}));t("PlayerInboxNetwork",h("PlayerInboxNetwork")(p=function(t){function o(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).servieNetworkName=null,e}e(o,t);var a=o.prototype;return a.onData=function(t,e){var r=e.type,n=e.payload;switch(r){case s.INIT:n&&n.apiService&&(this.servieNetworkName=n.apiService),this.initNetworkState(t)}},a.onRender=function(){var t=r(n().mark((function t(e,r,o){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r.status,t.next=t.t0===l.INIT?3:6;break;case 3:return t.next=5,this.connect(this._url);case 5:return t.abrupt("break",6);case 6:e&&e();case 7:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),a.initNetworkState=function(){var t=r(n().mark((function t(e){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.servieNetworkName){t.next=2;break}return t.abrupt("return");case 2:r=this.getAPIData(this.servieNetworkName),this._url=r.config.wssURL,e.status=l.INIT,this.render();case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.getStartDateParam=function(t,e){var r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate()).toISOString()},a.getEndDateParam=function(t,e){return(new Date).toISOString()},a.getAPIData=function(t){if(t){var e=this.getOtherState(t);return e||(i("[Lobby Popup]: Không có hoặc setup nhầm service"),null)}return i("[Lobby Popup] Chưa khai báo service name ! Có thể do StartGameAction.INIT chưa được dispatch."),null},a.onMessage=function(e,r){t.prototype.onMessage.call(this,e,r),this.dispatch({type:u.UPDATE_INBOX})},a.onError=function(e,r){t.prototype.onError.call(this,e,r)},o}(c))||p);o._RF.pop()}}}));

System.register("bundle://common/_virtual/PlayerInboxPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePopup.ts","./ServiceRequestConfig.ts","./StartActions.ts","./PlayerInboxType.ts","./PlayerInboxItem.ts","./RemoteMultilingualTextPackage.ts","./AsyncWaitify.ts","./RemoteScriptImporter.ts"],(function(e){var t,n,r,a,i,o,u,s,c,l,p,d,h,f,m,b,g,y,I,v,S,w,x,P,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.js,l=e.Node,p=e.Prefab,d=e.Label,h=e.warn,f=e.error,m=e.instantiate},function(e){b=e.GamePopup},function(e){g=e.ServiceRequestConfig},function(e){y=e.MainGameAction,I=e.API_ACTION},function(e){v=e.PlayerInboxAction,S=e.PlayerInboxStatus},function(e){w=e.PlayerInboxItem},function(e){x=e.RemoteMultilingualTextPackage},function(e){P=e.AsyncWaitify},function(e){N=e.remoteCCClass}],execute:function(){var R,k,C,E,A,_,O,D,T,V,W,B,F,H,L,z,M,U,q,G,X,j,K,Y,J,Q,Z,$,ee,te,ne;u._RF.push({},"fff45zhKsxHAo4VpOtuJGXg","PlayerInboxPopup",void 0);s.ccclass;var re=s.property,ae=c.getClassByName("Helper");e("PlayerInboxPopup",(R=N("PlayerInboxPopup"),k=re({readonly:!0}),C=re({type:l,group:"PANEL"}),E=re({type:l,group:"PANEL"}),A=re({type:l,group:"PANEL"}),_=re({type:l,group:"PANEL"}),O=re({type:l,group:"PANEL"}),D=re({type:l,group:"PANEL",displayName:"|__ Content"}),T=re({type:p,group:"ASSETS",displayName:"Item Prefab"}),V=re({type:x,group:"ASSETS",displayName:"Language Package"}),W=re({type:l,group:"PANEL",displayName:"|__ Prepaid Panel"}),B=re({type:l,group:"PANEL",displayName:"|__ CashDrop Panel"}),F=re({type:d,group:"PANEL",displayName:"|__ Empty Notication"}),H=re({type:g,group:"NETWORK"}),L=re({type:g,group:"NETWORK"}),R((M=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"waitForStore",U,a(t)),r(t,"curtain",q,a(t)),r(t,"closeButton",G,a(t)),r(t,"dragButton",X,a(t)),r(t,"continueNotication",j,a(t)),r(t,"playerInboxPanel",K,a(t)),r(t,"inboxContainer",Y,a(t)),r(t,"itemPrefab",J,a(t)),r(t,"languagePackage",Q,a(t)),r(t,"prepaidPanel",Z,a(t)),r(t,"cashDropPanel",$,a(t)),r(t,"emptyNotication",ee,a(t)),r(t,"listingService",te,a(t)),r(t,"claimService",ne,a(t)),t._selectedItemInfo=void 0,t.servieName="APIService",t._continue=void 0,t}n(t,e);var u=t.prototype;return u.allowActionTypes=function(){return[y.INIT,y.SETTING,v.UPDATE_INBOX,v.CLAIM,v.SHOW,v.HIDE]},u.onInit=function(e){var t=this;this.waitForReady().then((function(){t.dispatch({type:v.SHOW,payload:{status:S.SHOW_ICON_VIEW}})}))},u.onStoreRegisted=function(e,t){(this.senderIsMe()&&this.hasOtherState(this.waitForStore)||-1!==t.sender.indexOf(this.waitForStore))&&this.ready()},u.onData=function(e,t){var n=t.type,r=t.payload;switch(n){case y.INIT:r&&r.apiService&&(this.servieName=r.apiService),this.servieName=r.apiService,this.checkAndUpdateClaimmingState(e);break;case y.SETTING:this.implementSettingState(e,t);break;case v.UPDATE_INBOX:e.status=S.SHOW_INBOX_VIEW,this.render(!0),e.status=S.READY;break;case v.SHOW:r&&(c.isNumber(r.status)||r.status)&&(e.status=r.status),this.render();break;case v.HIDE:e.status=S.HIDE_VIEW,this.render();break;case v.CLAIM:r&&(e.status=S.CLAIM,e.claimed||(e.claimed=Object.create(null)),e.claimed.url=r.url,e.claimed.data=r.data),this.render()}},u.onRender=function(){var e=i(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.status,e.next=e.t0===S.SHOW_ICON_VIEW?3:e.t0===S.SHOW_INBOX_VIEW?6:e.t0===S.HIDE_VIEW?11:e.t0===S.CLAIM?12:e.t0===S.SHOW_CONTINUE_VIEW?19:e.t0===S.UPDATE?26:e.t0===S.AUTO_SPIN?29:32;break;case 3:return e.next=5,this.showIconViewRender(n);case 5:return e.abrupt("break",32);case 6:return e.next=8,this.showInboxViewRender(n);case 8:return e.next=10,this.requestInboxStateRender();case 10:case 11:return e.abrupt("break",32);case 12:return e.next=14,this.requestClaimmingStateRender(n);case 14:return e.next=16,this.showIconViewRender(n);case 16:return e.next=18,this.updateAutoSpinSettingRender(n);case 18:return e.abrupt("break",32);case 19:return e.next=21,this.showContinuePopupRender(n);case 21:return e.next=23,this.updateAutoSpinSettingRender(n);case 23:return e.next=25,this.showIconViewRender(n);case 25:return e.abrupt("break",32);case 26:return e.next=28,this.updateAutoSpinSettingRender(n);case 28:return e.abrupt("break",32);case 29:return e.next=31,this.executeSpinStateRender(n);case 31:return e.abrupt("break",32);case 32:t&&t();case 33:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),u.checkAndUpdateClaimmingState=function(e){if(this.servieName){var t=this.getOtherState(this.servieName),n=this.getClaimedRewards(t),r=this.getClaimInfoFromRewardData(n);r&&(e.claimed||(e.claimed=Object.create(null)),e.claimed.data=r||null,e.status=S.SHOW_CONTINUE_VIEW,this.render(!0)),e.status=S.READY}},u.implementSettingState=function(e,t){if(this.senderIsMe()){var n,r;this.isStoreRegisted(this.waitForStore)||h("implementSettingState----------- store "+this.waitForStore+" chua duoc khai tao"),this.waitFor(this.waitForStore);var a=e.claimed;if(a&&a.data&&null!=(n=a.data)&&n.count&&(null==(r=a.data)?void 0:r.count)>0){var i=e.status;e.status=S.AUTO_SPIN,this.render(!0),e.status=i,e.claimed=null}}},u.requestInboxStateRender=function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listingService.request();case 2:return t=e.sent,e.next=5,this.renderInboxList(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.requestClaimmingStateRender=function(){var e=i(o().mark((function e(t){var n,r,a,i,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStoreRegisted(this.waitForStore)){e.next=3;break}return e.next=3,this.waitForReady();case 3:if(a=null==t||null==(n=t.claimed)?void 0:n.url,!((null==t||null==(r=t.claimed)?void 0:r.data)&&a&&a.length)){e.next=16;break}return e.next=8,this.claimService.request([{url:a}]);case 8:if(i=e.sent){e.next=12;break}return f('[PlayerInboxPopup]::checkAndSetupPlayerInboxSetting(...): Do not found state data via "servieName" '),e.abrupt("return");case 12:u=this.getClaimedRewards(i),s=this.getClaimInfoFromRewardData(u),t.claimed||(t.claimed=Object.create(null)),t.claimed.data=s;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.updateAutoSpinSettingRender=function(){var e=i(o().mark((function e(t){var n,r,a,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=null==t||null==(n=t.claimed)?void 0:n.data)){e.next=9;break}if(a=r.count,i=r.betSetting,u=!!a&&a>0,this.isStoreRegisted(this.waitForStore)){e.next=8;break}return e.next=8,this.waitForReady();case 8:this.dispatch({type:y.SETTING,payload:{isUnstoppable:u,autoSpinNumber:a,betConfig:i}});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.executeSpinStateRender=function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStoreRegisted(this.waitForStore)){e.next=3;break}return e.next=3,this.waitForReady();case 3:this.dispatch({type:I.SPIN});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.showContinuePopupRender=function(){var e=i(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.curtain.active=!0,this.playerInboxPanel.active=!1,this.closeButton.active=!1,this.continueNotication.active=!0,this.dragButton.active=!1,e.next=7,new Promise((function(e){n._continue=e}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.showInboxViewRender=function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.curtain.active=!0,this.playerInboxPanel.active=!0,this.closeButton.active=!0,this.continueNotication.active=!1,this.dragButton.active=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.showIconViewRender=function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.curtain.active=!1,this.playerInboxPanel.active=!1,this.closeButton.active=!1,this.continueNotication.active=!1,this.dragButton.active=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.getClaimedRewards=function(e){if(e){var t=ae.searchValue(e,"config.playerReward");return Array.isArray(t)&&(t=t.find((function(e){return"CLAIMED"==e.status}))),t}},u.getPlayMode=function(e){var t=null==e?void 0:e.spin;if(t){var n=t.freeSpins||0;return n&&n>0?1:0}return 0},u.getClaimInfoFromRewardData=function(e){if(!e)return null;var t=ae.searchValue(e,"id"),n=e.rewardCount||ae.searchValue(e,"reward.count")||0,r=ae.searchValue(e,"reward.data");r&&(r=c.isString(r)?JSON.parse(r):r);var a=r?ae.searchValue(r,"betSetting"):null;return a&&t?{claimId:t,betSetting:a,count:n}:null},u.renderInboxList=function(){var e=i(o().mark((function e(t){var n,r,a,i,u,s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||null==(n=t.config)||!n.playerInbox){e.next=18;break}if(a=null==t||null==(r=t.config)?void 0:r.playerInbox.data,i=ae.searchValue(null==t?void 0:t.config,"domain"),u=ae.searchValue(null==t?void 0:t.config,"playerToken"),this.emptyNotication&&(this.emptyNotication.node.active=!(a&&a.length)),!a||!a.length){e.next=15;break}if(s=(new Date).getTime(),l=[],a.forEach((function(e,t){var n=c.createMap();n.id=t,n.claimId=ae.searchValue(e,"id"),n.module=ae.searchValue(e,"module"),n.isRead=!!ae.searchValue(e,"isRead"),n.claimBefore=new Date(ae.searchValue(e,"claimBefore")),n.claimUrl=i+ae.searchValue(e,"claimUrl")+u,n.count=ae.searchValue(e,"extraInfo.reward.count"),n.betSetting=ae.searchValue(e,"extraInfo.reward.data.betSetting"),l.push(n)})),!l.length){e.next=13;break}return l.sort((function(e,t){var n=new Date(e.claimBefore).getTime(),r=new Date(t.claimBefore).getTime();return n<s&&r<s?0:n<s?1:r<s?-1:n-r})),e.next=13,this.updateInboxHistoryRender(l);case 13:e.next=16;break;case 15:h("Empty Inbox !!!");case 16:e.next=19;break;case 18:h("There is no data for networkState.config.playerInbox");case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.updateInboxHistoryRender=function(){var e=i(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inboxContainer||!this.itemPrefab){e.next=6;break}if(!this.languagePackage){e.next=4;break}return e.next=4,this.languagePackage.waitForReady();case 4:this.inboxContainer.removeAllChildren(),t.forEach((function(e){var t=e.claimId,r=n.inboxContainer.getChildByName(t);r||((r=m(n.itemPrefab)).parent=n.inboxContainer,r.name=t);var a=r.getComponent(w);a.on(w.EVENT.SELECTED,n.onClaimItem.bind(n)),a.render(e)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.onClaimItem=function(){var e=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.claimService?(n={claimId:t.claimId,count:t.count,betSetting:t.betSetting},this.dispatch({type:v.CLAIM,payload:{url:t.claimUrl,data:n}})):f('No service config "claimService"');case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.onPressIconButton=function(e){this.dispatch({type:v.SHOW,payload:{status:S.SHOW_INBOX_VIEW}})},u.onPressCloseButton=function(e){this.dispatch({type:v.SHOW,payload:{status:S.SHOW_ICON_VIEW}})},u.onPressOkButton=function(e){this._continue&&this._continue()},u.getStartDateParam=function(e,t){var n=new Date;return new Date(n.getFullYear(),n.getMonth(),n.getDate()).toISOString()},u.getEndDateParam=function(e,t){return(new Date).toISOString()},u.getCurrentRewardId=function(e,t){return this._selectedItemInfo?this._selectedItemInfo.claimId:void 0},u.getCurrentModule=function(e,t){return this._selectedItemInfo?this._selectedItemInfo.module:void 0},u.getIsFunParam=function(e,t){return"false"},u.getAPIData=function(){var e=this.getOtherState(this.servieName);return e||(f("Không có hoặc setup nhầm service"),null)},t}(P(b)),U=t(M.prototype,"waitForStore",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"PlayButton"}}),q=t(M.prototype,"curtain",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(M.prototype,"closeButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(M.prototype,"dragButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(M.prototype,"continueNotication",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(M.prototype,"playerInboxPanel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(M.prototype,"inboxContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(M.prototype,"itemPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(M.prototype,"languagePackage",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(M.prototype,"prepaidPanel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(M.prototype,"cashDropPanel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(M.prototype,"emptyNotication",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(M.prototype,"listingService",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(M.prototype,"claimService",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=M))||z));u._RF.pop()}}}));

System.register("bundle://common/_virtual/PlayerInboxType.ts",["cc"],(function(_){var I;return{setters:[function(_){I=_.cclegacy}],execute:function(){I._RF.push({},"76d2e7NglhB1ZQYDUfyA9e9","PlayerInboxType",void 0);_("PlayerInboxStatus",function(_){return _[_.INIT=0]="INIT",_[_.READY=1]="READY",_[_.UPDATE=2]="UPDATE",_[_.SHOW_CONTINUE_VIEW=3]="SHOW_CONTINUE_VIEW",_[_.SHOW_ICON_VIEW=4]="SHOW_ICON_VIEW",_[_.SHOW_INBOX_VIEW=5]="SHOW_INBOX_VIEW",_[_.HIDE_VIEW=6]="HIDE_VIEW",_[_.CLAIM=7]="CLAIM",_[_.AUTO_SPIN=8]="AUTO_SPIN",_}({})),_("PlayerInboxAction",{UPDATE_INBOX:"player_inbox_update_inbox_action",UPDATE_SETTING:"player_inbox_update_setting_action",SHOW:"player_inbox_show_action",HIDE:"player_inbox_hide_action",CLAIM:"player_inbox_claim_action"});I._RF.pop()}}}));

System.register("bundle://common/_virtual/Reducer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Store.ts"],(function(t){var e,n,r,c,i;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){r=t._decorator,c=t.error},function(t){i=t.Store}],execute:function(){var a,o=r.ccclass;t("Reducer",o("Reducer")(a=function(t){function r(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this)._state=void 0,e}e(r,t);var i=r.prototype;return i.onLoad=function(){this._state=this.initialState},i.onDestroy=function(){t.prototype.onDestroy.call(this),this._state=null},i.onRejected=function(){},i.getState=function(){return Object.assign({},this._state)},i.reduce=function(t,e){throw new Error(this.__ccClassName+".reduce :: Các subclass kế thừa Reducer yêu cầu Override hàm này để có thủ tục reduce các trạng thái của Store.")},i.areEqual=function(t,e){return t===e},i.__onDispatch=function(t){var e=this.reduce(this.getState(),t);void 0===e&&c(!1),this.setState(e)},i.setState=function(t,e){void 0===e&&(e=!1);var n=this._state;return e||!this.areEqual(n,t)?(this._state=t,this.__emitChange(),!0):(this.__rejectChange(),!1)},i.__rejectChange=function(){this.onRejected()},n(r,[{key:"initialState",get:function(){try{throw new Error(this.__ccClassName+".initialState :: Cần có thủ tục khởi tạo State ban đầu.")}catch(t){c(c)}return null}}]),r}(i))||a)}}}));

System.register("bundle://common/_virtual/RemoteMultilingualTextPackage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MultilingualController.ts","./RemoteScriptImporter.ts","./AsyncWaitify.ts"],(function(e){var n,t,r,i,u,o,s,a,l,d,c,h,p,b,m,f,x,g,I,y,N;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,u=e.createClass,o=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e._decorator,l=e.Enum,d=e.CCString,c=e.Component,h=e.error,p=e.assetManager,b=e.js,m=e.warn,f=e.resources,x=e.JsonAsset},function(e){g=e.MultilingualController},function(e){I=e.importRemoteCCClass,y=e.remoteCCClass},function(e){N=e.AsyncWaitify}],execute:function(){var _,L,v,A,B,E,V,P,k,w,O,G,D,S,z,T,R,C,M,j,J=a.property,U=a.executeInEditMode,W=I("Helper"),H=I("LocalizationController"),K={STAGE_LOADING:"",GAMIFY_WORKSPACE:"http://222.252.29.181:2567",JSDELIVR_NET:"https://cdn.jsdelivr.net/gh/hallo-gamify/gamify-resource@master"},F=W.convertToEnum(K),Y=l({ERROR_LOADING_BUNDLE:0}),q=l({ERROR_LOADING_BUNDLE_VERSION:0});e("RemoteMultilingualTextPackage",(_=y("RemoteMultilingualTextPackage"),L=U(!0),v=J({type:F,displayName:"Host"}),A=J({type:Y,displayName:"Bundle",visible:function(){return this.hostIndex!==F.STAGE_LOADING}}),B=J({type:q,displayName:"Version",visible:function(){return this.hostIndex!==F.STAGE_LOADING}}),E=J({serializable:!0,visible:!1}),V=J({type:d,serializable:!0,visible:function(){return this.hostIndex==F.STAGE_LOADING}}),P=J({serializable:!0,visible:!1}),k=J({serializable:!0}),w=J({serializable:!0}),O=J({serializable:!0}),_(G=L(((j=function(e){function n(){for(var n,t=arguments.length,u=new Array(t),o=0;o<t;o++)u[o]=arguments[o];return n=e.call.apply(e,[this].concat(u))||this,r(n,"hostName",S,i(n)),r(n,"bundleName",z,i(n)),r(n,"bunderVersion",T,i(n)),r(n,"_hostIndex",R,i(n)),r(n,"_bundleVersionIndex",C,i(n)),r(n,"_bundleNameIndex",M,i(n)),n.controller=null,n}t(n,e);var a=n.prototype;return a.onLoad=function(){var n=o(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.controller||(this.controller=this.getComponent(g)),e.prototype.onLoad&&e.prototype.onLoad.call(this),n.next=4,this.startLoadingLanguagePack();case 4:if(n.t0=this.controller,!n.t0){n.next=8;break}return n.next=8,this.controller.startLocalizing(!0);case 8:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a.startLoadingLanguagePack=function(){var e=o(s().mark((function e(){var n,t,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(null==(n=this.controller)?void 0:n.currentLanguage)||H.language,this.hostIndex===F.STAGE_LOADING){e.next=4;break}return e.next=4,this.__loadAndParseBundleList.call(this);case 4:return e.next=6,this.__loadBundle();case 6:return r=e.sent,e.next=9,this._loadAndParseLanguagePackage(t,r);case 9:i=e.sent,this.ready(i);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.__loadAndParseBundleList=function(){var e=o(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hostIndex!=F.STAGE_LOADING){e.next=2;break}return e.abrupt("return",null);case 2:if(e.t0=n.BundleList,e.t0){e.next=7;break}return e.next=6,new Promise((function(e){return p.loadAny({url:t.hostName+"/remote"},(function(n,t){var r=b.isString(t)?JSON.parse(t):t;return e(n?null:r)}))}));case 6:e.t0=e.sent;case 7:if(n.BundleList=e.t0,!n.BundleList){e.next=14;break}return this.updateBundleEnum(),this.updateBundleVersionEnum(),e.abrupt("return",n.BundleList);case 14:h("[RemoteMultilingualTextPackage] Khong load duoc server !");case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.__loadBundle=function(){var e=o(s().mark((function e(){var n,t,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.bundleName&&this.bundleName.length){e.next=4;break}return m("Do not exsit bundle name "+this.bundleName+" use cc.resources bundle instead"),e.abrupt("return",f);case 4:if(n=p.getBundle(this.bundleName)){e.next=10;break}return t=(this.hostIndex==F.STAGE_LOADING?"":this.hostName)+"/remote/"+this.bundleName,e.next=9,new Promise((function(e){r.hostIndex==F.STAGE_LOADING?p.loadBundle(t,(function(n,t){e(n?null:t)})):p.loadBundle(t,{version:r.bunderVersion},(function(n,t){e(n?null:t)}))}));case 9:n=e.sent;case 10:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a._loadAndParseLanguagePackage=function(){var e=o(s().mark((function e(n,t){var r,i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=(this.controller&&this.controller.localizedPath?this.controller.localizedPath+"/":"")+n)||!t){e.next=8;break}return e.next=4,new Promise((function(e){t.load(r,x,(function(n,t){e(n?null:t&&t instanceof x?t.json:JSON.parse(t.toString()))}))}));case 4:return i=e.sent,u=t.name,i&&H.addJSONPackage(u,i,!1),e.abrupt("return",i);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),a.updateBundleEnum=function(){n.BundleList&&(Y=W.convertToEnum(n.BundleList),this.bundleName&&this.bundleName.length&&void 0!==Y[this.bundleName]&&null!==Y[this.bundleName]?this._bundleNameIndex=Y[this.bundleName]:this._bundleNameIndex=0,this.bundleName=Y[this._bundleNameIndex]),n.BundleList||console.log("Unable update bundle Enum !")},a.updateBundleVersionEnum=function(){if(n.BundleList){var e=Y[this.bundleNameIndex],t=n.BundleList[e];q=W.convertToEnum(t),this.bunderVersion&&this.bunderVersion.length&&void 0!==q[this.bunderVersion]&&null!==q[this.bunderVersion]?this._bundleVersionIndex=q[this.bunderVersion]:this._bundleVersionIndex=0,this.bunderVersion=q[this._bundleVersionIndex]}n.BundleList||console.log("Unable update version Enum !")},u(n,[{key:"hostIndex",get:function(){return this._hostIndex},set:function(e){this._hostIndex!==e&&(this._hostIndex=e,this.hostName=K[F[e]],this.__loadAndParseBundleList())}},{key:"bundleNameIndex",get:function(){return this._bundleNameIndex},set:function(e){this.updateBundleEnum(),n.BundleList&&(this._bundleNameIndex=e,this.bundleName=Y[this._bundleNameIndex]),this.updateBundleVersionEnum()}},{key:"bundleVersionIndex",get:function(){return this._bundleVersionIndex},set:function(e){this.updateBundleVersionEnum(),n.BundleList&&(this._bundleVersionIndex=e,this.bunderVersion=q[this._bundleVersionIndex])}}]),n}(N(c))).BundleList=void 0,n((D=j).prototype,"hostIndex",[v],Object.getOwnPropertyDescriptor(D.prototype,"hostIndex"),D.prototype),n(D.prototype,"bundleNameIndex",[A],Object.getOwnPropertyDescriptor(D.prototype,"bundleNameIndex"),D.prototype),n(D.prototype,"bundleVersionIndex",[B],Object.getOwnPropertyDescriptor(D.prototype,"bundleVersionIndex"),D.prototype),S=n(D.prototype,"hostName",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return K.GAMIFY_WORKSPACE}}),z=n(D.prototype,"bundleName",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=n(D.prototype,"bunderVersion",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(D.prototype,"_hostIndex",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=n(D.prototype,"_bundleVersionIndex",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=n(D.prototype,"_bundleNameIndex",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=D))||G)||G))}}}));

System.register("bundle://common/_virtual/RemoteScriptImporter.ts",["cc"],(function(t){var e,r;return{setters:[function(t){e=t.js,r=t.CCClass}],execute:function(){t("importRemoteCCClass",(function(t){return e.getClassByName(t)}));var n="__ccclassCache__";var c;t("remoteCCClass",(c=function(t,c){if(!e.getClassByName(c)){var o=e.getSuper(t);o===Object&&(o=null);var s={name:c,extends:o,ctor:t},a=t[n];if(a){var u=a.proto;u&&e.mixin(s,u),t[n]=void 0}return r(s)}},function(t){try{return"function"==typeof t?c(t):function(e){return c(e,t)}}catch(t){}}))}}}));

System.register("bundle://common/_virtual/RenderOrderDispatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionStoreDispatcher.ts"],(function(e){var t,n,r,i,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e._decorator,r=e.js,i=e.warn},function(e){s=e.ActionStoreDispatcher}],execute:function(){var a,o=n.ccclass;e("RenderOrderDispatcher",o("RenderOrderDispatcher")(a=function(e){function n(t){var n;return(n=e.call(this,t)||this)._nullObject=Object.create(null),n._orderTasks=null,n._isRendering=!1,n._renderMap=null,n._renderMap=new Map,n}t(n,e);var s=n.prototype;return s._applyRenderBefore=function(e,t){var n=this._validateIds(e),r=n.pop();n.forEach((function(e){var n=t[e]||[];n=n.concat([r]),t[e]=n})),t[r]=t[r]||[]},s.registerRender=function(e,t,n,r,i){var s=this;void 0===t&&(t=null),this._pendingAction;var a=this._pendingAction,o=a.type,c=this.getRenderTask(o),l=c.tasks;if(l&&this.isDispatching()){var h=this._validateIds([e])[0],d=c.map,p=c.callbacks,u=c.pending;d[h]=d[h]||[],l[h]=l[h]||[];l[h].push((function(e){return i&&p.push(i),u.add(h),new Promise((function(i,c){s.findMapName(h);n&&n((function(t){r&&r(o),u.has(h)&&u.delete(h),t=e?Object.assign(e,t):t,i&&i(t),0==u.size&&s._stopRendering(t,a)}),t,e,a)}))}))}},s.removeRender=function(e){var t=this._validateIds([e])[0];this._renderMap.forEach((function(e){delete e.tasks[t];var n=e.map;delete n[t],Object.keys(n).forEach((function(e){var t=n[e],r=t.indexOf(e);-1!=r&&(t.splice(r,1),n[e]=t)}))}))},s.renderBefore=function(e,t){var n=this._pendingAction?this._pendingAction.type:null,r=this.getRenderTask(n);this._applyRenderBefore(e.concat(t),r.map)},s.isRendering=function(){return this._isRendering},s.getRenderTask=function(e){var t=this._renderMap.get(e);return t||(t={pending:new Set,map:Object.create(null),tasks:Object.create(null),callbacks:[]},this._renderMap.set(e,t)),t},s._startRendering=function(e,t,n,s){if(t&&!r.isEmptyObject(t)&&!this.isRendering()){var a=Object.keys(t);if(a.length){a=this.sortRelativeMap(a,e),this._isRendering=0!=s.size;for(var o=[],c=[];a.length;){var l=a.shift();Object.prototype.hasOwnProperty.call(e,l)&&o.push(this.__excuteTask(l,e,t,Promise.resolve(),c))}Promise.all(o).then((function(e){a.length&&i("?????????????????? Van con task dang chay !"),Array.isArray(e)&&1==e.length&&(e=e[0])}))}}},s.__excuteTask=function(e,t,n,r,i){if(void 0===i&&(i=[]),t&&n){var s=t[e];if(s){delete t[e];var a=n[e];if(a&&a.length)for(;a.length;){var o=a.shift();o&&(r=r?r.then(o):o())}for(;s.length;)this.__excuteTask(s.shift(),t,n,r,i)}}return r},s.sortRelativeMap=function(e,t,n,r){var i=n||Object.create(null),s=r||[];for(var a in t)i[a]||this.invokeSortRenderTasks(a,t,i,s);var o=s.reverse();return o=o.filter((function(t){return-1!=e.indexOf(t)}))},s.waitRenderTask=function(e,t,n,r){for(var i=0;i<e.length;i++){var s=e[i];n&&n[s]||this.invokeSortRenderTasks(s,t,n,r)}},s.invokeSortRenderTasks=function(e,t,n,r){n[e]=!0;var i=t[e];i&&i.length&&this.waitRenderTask(i,t,n,r),r.push(e)},s._stopRendering=function(e,t){for(var n=t.type,r=this.getRenderTask(n).callbacks;r.length;){var i=r.shift();i&&i(e,t)}this._isRendering=!1},s._startDispatching=function(t){this._orderTasks=new Array,e.prototype._startDispatching.call(this,t)},s._invokeCallback=function(t){e.prototype._invokeCallback.call(this,t),this._isPending[t]&&this._orderTasks.push(t)},s._stopDispatching=function(){var t=this._pendingAction,n=t.type,r=this.getRenderTask(n);e.prototype._stopDispatching.call(this),this._startRendering(r.map,r.tasks,t,r.pending),this._orderTasks=null},s.__detectCircleLoop=function(e){this._isHandled[e]||(this._isPending[e]=!1)},s.destroy=function(){this._renderMap=null,this._orderTasks=null,e.prototype.destroy.call(this)},n}(s))||a)}}}));

System.register("bundle://common/_virtual/RenderQueueDispatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Helper.ts","./RenderOrderDispatcher.ts"],(function(e){var r,n,t,s;return{setters:[function(e){r=e.inheritsLoose},function(e){n=e._decorator},function(e){t=e.Helper},function(e){s=e.RenderOrderDispatcher}],execute:function(){var u,i=n.ccclass;e("RenderQueueDispatcher",i("RenderQueueDispatcher")(u=function(e){function n(r){var n;return(n=e.call(this,r)||this)._nullObject=Object.create(null),n._renderQueueTasks=[],n._pauseRendering=!1,n}r(n,e);var s=n.prototype;return s._startRendering=function(r,n,s,u){n&&r&&!t.areEqual(n,this._nullObject)&&!t.areEqual(r,this._nullObject)&&(this.isRendering()||this._pauseRendering?(this._renderQueueTasks||(this._renderQueueTasks=[]),this._renderQueueTasks.push(e.prototype._startRendering.bind(this,r,n,s,u))):e.prototype._startRendering.call(this,r,n,s,u))},s._stopRendering=function(r,n){e.prototype._stopRendering.call(this,r,n),this.renderQueuTasks()},s.pauseRendering=function(e){void 0===e&&(e=!0),this._pauseRendering=e},s.renderQueuTasks=function(){this._renderQueueTasks&&this._renderQueueTasks.length&&this._renderQueueTasks.pop()()},n}(s))||u)}}}));

System.register("bundle://common/_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){return{execute:function(){function e(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function n(){return(n=t("extends",Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t})).apply(this,arguments)}function o(e,r){return(o=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t}))(e,r)}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t){var e=u(t,"string");return"symbol"==typeof e?e:String(e)}t({applyDecoratedDescriptor:function(t,e,r,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null);return i},arrayLikeToArray:a,assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)}))}},createClass:function(t,e,n){e&&r(t.prototype,e);n&&r(t,n);return Object.defineProperty(t,"prototype",{writable:!1}),t},createForOfIteratorHelperLoose:function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},extends:n,inheritsLoose:function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)},initializerDefineProperty:function(t,e,r,n){if(!r)return;Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return e}));var e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:L(t,r,u)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h={};function p(){}function y(){}function v(){}var d={};l(d,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(_([])));m&&m!==r&&n.call(m,a)&&(d=m);var b=v.prototype=p.prototype=Object.create(d);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=j(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function _(t){if(t||""===t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=v,o(b,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},w(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,c,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e},setPrototypeOf:o,toPrimitive:u,toPropertyKey:c,unsupportedIterableToArray:i})}}}));

System.register("bundle://common/_virtual/SearchingSet.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,n,i;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t._decorator,n=t.js,i=t.error}],execute:function(){var a,o,s=e.ccclass,c=(e.property,/[^a-zA-Z0-9\u00C0-\u00FF\u0621-\u064A\u0660-\u0669, ]+/g),h=[],u=s("SearchingMath")(a=function(){function t(){}var r=t.prototype;return r.levenshtein=function(t,r){for(var e,n,i=[],a=0;a<=r.length;a++)for(var o=0;o<=t.length;o++)n=a&&o?t.charAt(o-1)===r.charAt(a-1)?e:Math.min(i[o],i[o-1],e)+1:a+o,e=i[o],i[o]=n;return i.pop()},r.distance=function(t,r){if(null===t&&null===r)throw"Trying to compare two null values";if(null===t||null===r)return 0;t=String(t),r=String(r);var e=this.levenshtein(t,r);return t.length>r.length?1-e/t.length:1-e/r.length},r.iterateGrams=function(t,r){r=r||2;var e="-"+t.toLowerCase().replace(c,"")+"-",n=r-e.length,i=[];if(n>0)for(var a=0;a<n;++a)e+="-";for(var o=0;o<e.length-r+1;++o)i.push(e.slice(o,o+r));return i},r.gramCounter=function(t,r){r=r||2;for(var e={},n=this.iterateGrams(t,r),i=0;i<n.length;++i)n[i]in e?e[n[i]]+=1:e[n[i]]=1;return e},t}())||a;t("SearchingSet",s("SearchingSet")(o=function(t){function e(){var r;(r=t.call(this)||this).gramSizeLower=2,r.gramSizeUpper=2,r.useLevenshtein=!0,r.exactSet=Object.create(null),r.matchDict=Object.create(null),r.items=Object.create(null),r.arr=h||[],r._defaultMinScore=.33;for(var e=r.gramSizeLower;e<r.gramSizeUpper+1;++e)r.items[e]=[];for(e=0;e<r.arr.length;++e)r.add(r.arr[e]);return r}r(e,t);var a=e.prototype;return a.get=function(t,r,e){void 0===e&&(e=this._defaultMinScore);var n=this._get(t,e);return n||void 0===r?n:[r]},a.add=function(t){if(this._normalizeStr(t)in this.exactSet)return!1;for(var r=this.gramSizeLower;r<this.gramSizeUpper+1;++r)this._add(t,r)},a.setMinScore=function(t){this._defaultMinScore=t},a.length=function(){var t,r=0;for(t in this.exactSet)Object.prototype.hasOwnProperty.call(this.exactSet,t)&&(r+=1);return r},a.isEmpty=function(){for(var t in this.exactSet)if(Object.prototype.hasOwnProperty.call(this.exactSet,t))return!1;return!0},a.values=function(){var t,r=[];for(t in this.exactSet)Object.prototype.hasOwnProperty.call(this.exactSet,t)&&r.push(this.exactSet[t]);return r},a._get=function(t,r){for(var e=[],n=this.gramSizeUpper;n>=this.gramSizeLower;--n)if((e=this.__get(t,n,r))&&e.length>0)return e;return null},a.__get=function(t,r,e){var i,a,o,s,c,h=this._normalizeStr(t),u=Object.create(null),l=this.gramCounter(h,r),f=this.items[r],g=0;for(i in l)if(a=l[i],g+=Math.pow(a,2),i in this.matchDict)for(o=0;o<this.matchDict[i].length;++o)s=this.matchDict[i][o][0],c=this.matchDict[i][o][1],s in u?u[s]+=a*c:u[s]=a*c;if(n.isEmptyObject(u))return null;var p,S=Math.sqrt(g),m=[];for(var v in u)p=u[v],m.push([p/(S*f[v][0]),f[v][1]]);var d=function(t,r){return t[0]<r[0]?1:t[0]>r[0]?-1:0};if(m.sort(d),this.useLevenshtein){for(var _=[],y=Math.min(50,m.length),z=0;z<y;++z)_.push([this.distance(m[z][1],h),m[z][1]]);(m=_).sort(d)}return _=[],m.forEach(function(t){t[0]>=e&&_.push([t[0],this.exactSet[t[1]]])}.bind(this)),_},a._add=function(t,r){var e=this._normalizeStr(t),n=this.items[r]||[],i=n.length;n.push(0);var a,o,s=this.gramCounter(e,r),c=0;for(a in s)o=s[a],c+=Math.pow(o,2),a in this.matchDict?this.matchDict[a].push([i,o]):this.matchDict[a]=[[i,o]];var h=Math.sqrt(c);n[i]=[h,e],this.items[r]=n,this.exactSet[e]=t},a._normalizeStr=function(t){if("[object String]"!==Object.prototype.toString.call(t))throw i("error str :: "+t),"Must use a string as argument to FuzzySet functions";return t.toLowerCase()},e}(u))||o)}}}));

System.register("bundle://common/_virtual/ServiceRequestConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RemoteScriptImporter.ts"],(function(e){var t,r,i,n,a,o,s,l,p,u,c,h,f,y,d,m,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass,o=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){l=e._decorator,p=e.Enum,u=e.EventHandler,c=e.CCString,h=e.CCObject,f=e.js,y=e.Component,d=e.warn,m=e.log},function(e){v=e.remoteCCClass}],execute:function(){l.ccclass;var b,g,C,_,N,w,E,k,O,T,R,A,S,I,P,V,U,L,F,q,z,x,D,K,j,Y,M,G,B=l.property,H=(l.executeInEditMode,function(e){return e[e.GET=0]="GET",e[e.POST=1]="POST",e[e.PUT=2]="PUT",e[e.OPTIONS=3]="OPTIONS",e[e.DELETE=4]="DELETE",e}(H||{}));p(H);var J=function(e){return e[e.KEY_VALUE=0]="KEY_VALUE",e[e.FUNCTIONAL=1]="FUNCTIONAL",e}(J||{}),Q=(b=v("RequestParams"),g=B({type:p(J)}),C=B({visible:function(){return this.type==J.KEY_VALUE}}),_=B({type:u,visible:function(){return this.type==J.FUNCTIONAL},displayName:"Value"}),b((E=t((w=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"type",E,n(t)),i(t,"key",k,n(t)),i(t,"value",O,n(t)),i(t,"funcionalValue",T,n(t)),t}return r(t,e),t}(h)).prototype,"type",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.KEY_VALUE}}),k=t(w.prototype,"key",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=t(w.prototype,"value",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=t(w.prototype,"funcionalValue",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),N=w))||N);e("ServiceRequestConfig",(R=v("ServiceRequestConfig"),A=B({type:c}),S=B({serializable:!0}),I=B({type:c}),P=B({serializable:!0,visible:!1}),V=B({type:H,displayName:"Method"}),U=B({type:[c]}),L=B({type:[Q],tooltip:"Copy data from the path (or Value Type) inside 'Value' field to \n fill the params[Key] field which use to request to url.\n Using the {path.to..} block to identify the path."}),F=B({type:[Q],visible:function(){return this.methodId==H.POST},tooltip:"Copy data from the path (or Value Type) inside 'Value' field to \n fill the params[Key] field which use to request to url.\n Using the {path.to..} block to identify the path."}),q=B({type:[Q],tooltip:"Copy data from the path (or Value Type, or Function(state)=>value ) \n inside 'Value' field to fill the path inside 'Key' field.\n Using the {path.to..} block to identify the path."}),R((t((x=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"_serviceName",D,n(t)),i(t,"_url",K,n(t)),i(t,"methodId",j,n(t)),i(t,"params",Y,n(t)),i(t,"payloads",M,n(t)),i(t,"responseScripts",G,n(t)),t._adaptor=void 0,t._waitForReadyCalback=[],t}r(t,e);var l=t.prototype;return l.setAdaptor=function(e){if(this._adaptor=e,this._waitForReadyCalback&&this._waitForReadyCalback.length&&e.isReady()){for(;this._waitForReadyCalback.length;){this._waitForReadyCalback.shift()()}this._waitForReadyCalback=null}},l.onLoad=function(){var e=this;if(!this._adaptor){var r;this.serviceName||(this.serviceName=f.getClassName(this));var i=f.getClassByName("APIServices"),n=null==(r=this.node)?void 0:r.getComponent(i);if(n){var a,o=null==(a=this.node.getComponents(t))?void 0:a.filter((function(t){return t.serviceName==e.serviceName}));if(o)o[o.length-1]&&o[o.length-1]==this&&o.forEach((function(t){return e._adaptor.registerServiceRequest(t.serviceName,t.getRequestConfig())}))}else{var s=f.getClassByName("APIServiceAdaptor");n=this.node.getComponent(s)||this.node.addComponent(s)}n&&this.setAdaptor(n)}},l.waitForReady=function(){var e=o(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._adaptor&&(!this._adaptor||this._adaptor.isReady())){e.next=5;break}return e.next=3,new Promise((function(e){t._waitForReadyCalback.push(e)}));case 3:e.next=6;break;case 5:d("SERVICE SETUP DONE !!!!!!!!!!!!!!");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.request=function(){var e=o(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:if(!Object.prototype.hasOwnProperty.call(this._adaptor.constructor.prototype,"request")){e.next=10;break}return e.next=5,this._adaptor.request(this.serviceName,t);case 5:return r=e.sent,m("Completed request !!!"),e.abrupt("return",r);case 10:m("Dispath truc tiep vao networkservice !"),this._adaptor.dispatch({type:this._adaptor.getRequestAction(this.serviceName),payload:t});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),l.getRequestConfig=function(){var e=Object.create(null),t=f.createMap();this.params.forEach((function(e){if(e.type==J.KEY_VALUE)t[e.key]=e.value;else if(e.type==J.FUNCTIONAL){var r=e.funcionalValue;if(r){var i,n=r.component||r._componentName,a=null==(i=r.target)?void 0:i.getComponent(n);a&&a[r.handler]&&(t[e.key]=a[r.handler].bind(a))}}}));var r=f.createMap();this.methodId==H.POST&&this.payloads.forEach((function(e){if(e.type==J.KEY_VALUE)r[e.key]=e.value;else if(e.type==J.FUNCTIONAL){var t=e.funcionalValue;if(t){var i,n=t.component||t._componentName,a=null==(i=t.target)?void 0:i.getComponent(n);a&&a[t.handler]&&(r[e.key]=a[t.handler].bind(a))}}}));var i=f.createMap();return this.responseScripts.forEach((function(e){if(e.type==J.KEY_VALUE)i[e.key]=e.value;else if(e.type==J.FUNCTIONAL){var r=e.funcionalValue;if(r){var n,a=null==(n=r.target)?void 0:n.getComponent(r.component);a&&a[r.handler]&&(t[e.key]=a[r.handler].bind(a))}}})),e.url=this.url,e.method=H[this.methodId],this.params.length&&(e.params=t),this.methodId==H.POST&&(e.payload=r),e.response_script=i,e},a(t,[{key:"serviceName",get:function(){return this._serviceName},set:function(e){this._serviceName=e}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"headers",get:function(){return["'Content-type':'application/json'"]}},{key:"adaptor",get:function(){return this._adaptor}},{key:"ResponseAction",get:function(){return this._adaptor?this._adaptor.getResponseAction(this.serviceName):this.serviceName}}]),t}(y)).prototype,"serviceName",[A],Object.getOwnPropertyDescriptor(x.prototype,"serviceName"),x.prototype),D=t(x.prototype,"_serviceName",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(x.prototype,"url",[I],Object.getOwnPropertyDescriptor(x.prototype,"url"),x.prototype),K=t(x.prototype,"_url",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"/client/lobby-url"}}),j=t(x.prototype,"methodId",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.GET}}),t(x.prototype,"headers",[U],Object.getOwnPropertyDescriptor(x.prototype,"headers"),x.prototype),Y=t(x.prototype,"params",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(x.prototype,"payloads",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=t(x.prototype,"responseScripts",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=x))||z))}}}));

System.register("bundle://common/_virtual/Setting.ts",[],(function(t){return{execute:function(){t("GAMIFY_WARNNING",!1)}}}));

System.register("bundle://common/_virtual/SkeletonClip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimelineClip.ts","./GameUtils.ts"],(function(n){var i,t,e,s,o,a,r,u,m,c,l,p,h,d;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,s=n.assertThisInitialized,o=n.createClass,a=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){u=n._decorator,m=n.Enum,c=n.js,l=n.Vec2,p=n.Vec3},function(n){h=n.TimelineClip},function(n){d=n.GameUtils}],execute:function(){var f,k,x,b,I,y,g,_,A,S,v,O,E,j,C,D=u.ccclass,N=u.property,z=u.executeInEditMode,w=u.menu,L="{ADJUST_ON_RUNTIME}",R=m({"*":-1}),T=m({"*":-1});n("SkeletonClip",(f=D("SkeletonClip"),k=w("Gamify/Animation/SkeletonClip"),x=z(!0),b=N({type:T,displayName:"Animation"}),I=N({type:R,displayName:"Skin"}),y=N({serializable:!0}),g=N({serializable:!0}),_=N({serializable:!0,visible:!1}),A=N({serializable:!0,animatable:!1}),f(S=k(S=x((i((v=function(n){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=n.call.apply(n,[this].concat(o))||this,e(i,"_animation",O,s(i)),e(i,"_skin",E,s(i)),e(i,"_skinIndex",j,s(i)),e(i,"_animIndex",C,s(i)),i}t(i,n);var u=i.prototype;return u.onLoad=function(){n.prototype.onLoad.call(this),this.generateEnums()},u.adjust=function(n){return c.isNumber(n)?this.combineNumber(n):c.isString(n)?this.combineString(n):c.isChildClassOf(n,l)?this.combineVec2(n):c.isChildClassOf(n,p)&&this.combineVec3(n),this},u.combineNumber=function(n){this.isAdjustOnRuntime(this.animIndex)?this.animIndex=n:this.isAdjustOnRuntime(this.skinIndex)&&(this.skinIndex=n)},u.combineString=function(n){if(this.super){var i=this.super.skeletonData.getSkinsEnum();this.combineNumber(i[n])}},u.combineVec2=function(n){this.skinIndex=this.isAdjustOnRuntime(this.skinIndex)?n.x:this.skinIndex,this.animIndex=this.isAdjustOnRuntime(this.animIndex)?n.y:this.animIndex},u.combineVec3=function(n){this.skinIndex=this.isAdjustOnRuntime(this.skinIndex)?n.x:this.skinIndex,this.animIndex=this.isAdjustOnRuntime(this.animIndex)?n.y:this.animIndex,this.isLoop=!!n.z},u.excute=function(){var n=a(r().mark((function n(i){var t=this;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===i&&(i=this.isLoop),n.next=3,new Promise((function(n,e){t.super.setSkin(t.skin),i?t.excute(!1).then((function(){t.super.loop=!0,t.super.setAnimation(0,t.animation,!0),n()})):(t.done=function(){t.done=null,t.super.setCompleteListener(null),n()},t.super.setCompleteListener((function(n){n.animation&&n.animation.name==t.animation&&t.done&&t.done()})),t.super.setAnimation(0,t.animation,!1))}));case 3:case"end":return n.stop()}}),n,this)})));return function(i){return n.apply(this,arguments)}}(),u.isAdjustOnRuntime=function(n){var i=this.super.skeletonData.getSkinsEnum();return L==i[n]},u.generateEnums=function(){if(this.super){var n=this.super.skeletonData;if(n){var i,t,e=n.getSkinsEnum(),s=n.getAnimsEnum();d.updateEnum(this,"skinIndex",Object.assign(((i={})[L]=m.getList(e).length,i),n.getSkinsEnum())),d.updateEnum(this,"animIndex",Object.assign(((t={})[L]=m.getList(s).length,t),n.getAnimsEnum())),this.updateAnimation(),this.updateSkin()}}},u.updateAnimation=function(){if(this.super){var n=this.super.skeletonData.getAnimsEnum();this._animation=n[this._animIndex],this.clipName.length||(this.clipName=this._animation)}},u.updateSkin=function(){if(this.super){var n=this.super.skeletonData.getSkinsEnum();this._skin=n[this._skinIndex],this.clipName==this._animation&&(this.clipName+="."+this._skin)}},u.onDestroy=function(){n.prototype.onDestroy.call(this),this.done&&this.done(),this.done=null},o(i,[{key:"animIndex",get:function(){return this._animIndex},set:function(n){this._animIndex=n,this.updateAnimation()}},{key:"skinIndex",get:function(){return this._skinIndex},set:function(n){this._skinIndex=n,this.updateSkin()}},{key:"animation",get:function(){return this._animation}},{key:"skin",get:function(){return this._skin}}]),i}(h)).prototype,"animIndex",[b],Object.getOwnPropertyDescriptor(v.prototype,"animIndex"),v.prototype),i(v.prototype,"skinIndex",[I],Object.getOwnPropertyDescriptor(v.prototype,"skinIndex"),v.prototype),O=i(v.prototype,"_animation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=i(v.prototype,"_skin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=i(v.prototype,"_skinIndex",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=i(v.prototype,"_animIndex",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=v))||S)||S)||S))}}}));

System.register("bundle://common/_virtual/SpineClip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SkeletonClip.ts","./AudioReference.ts","./AudioConfig.ts"],(function(t){var i,e,n,o,r,l,a,s,u,p,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass,l=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t._decorator},function(t){u=t.SkeletonClip},function(t){p=t.audio},function(t){c=t.AUDIO_LIST}],execute:function(){var y,f,h,d,C,D,v=s.ccclass,_=(s.property,s.executeInEditMode);s.requireComponent,t("SpineClip",(y=v("SpineClip"),f=_(!0),h=p(c),y(d=f((D=i((C=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,n(i,"audioOfClip",D,o(i)),i._playlistDuration=0,i}e(i,t);var s=i.prototype;return s.setPlaylist=function(i,e){void 0===e&&(e=!1),t.prototype.setPlaylist.call(this,i,e),this.controller&&(!this._playList||this._playList&&!this._playList.length?this.controller.setPlaylistDuration(0):this.controller.setPlaylistDuration(this.controller.playlistDuration+this.playlistDuration))},s.setPlaylistDuration=function(t){this._playlistDuration=t},s.excute=function(){var i=l(a().mark((function i(e){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return void 0===e&&(e=this.isLoop),this.audioOfClip.play(),i.next=4,t.prototype.excute.call(this,e);case 4:this.audioOfClip.stop();case 5:case"end":return i.stop()}}),i,this)})));return function(t){return i.apply(this,arguments)}}(),r(i,[{key:"playlistDuration",get:function(){var t,i;!this._playlistDuration&&this.audioOfClip&&null!=(t=this.audioOfClip)&&t.duration&&(this._playlistDuration=null==(i=this.audioOfClip)?void 0:i.duration);return this._playlistDuration}}]),i}(u)).prototype,"audioOfClip",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=C))||d)||d))}}}));

System.register("bundle://common/_virtual/StartActions.ts",[],(function(e){return{execute:function(){e("MainGameAction",{INIT:"initianize_game",START:"start_game",LAUNCH:"launch_game",SETTING:"setting_game",CONTINUE:"continue_game",BUY_FEATURE:"buy_feature_action",QUIT_GAME:"quit_game",CHEAT_GAME:"cheat_game"}),e("API_ACTION",{AUTH:"auth_service",CONFI_RESULT:"config_result_api",AUTH_RESULT:"auth_service_$response",SPIN:"spin_service",SPIN_RESULT:"spin_service_$response",FEATURE_BUY:"feature_buy_service",FEATURE_BUY_RESULT:"feature_buy_service_$response",TOTAL_HISTORY:"total_bet_service",TOTAL_HISTORY_RESULT:"total_bet_service_$response",BET_HISTORY:"detail_bet_service",BET_HISTORY_RESULT:"detail_bet_service_$response",SERVICE_ERROR:"service_error"})}}}));

System.register("bundle://common/_virtual/Store.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Setting.ts","./Dispatcher.ts"],(function(t){var e,i,n,s,a,c,h,r;return{setters:[function(t){e=t.inheritsLoose,i=t.assertThisInitialized},function(t){n=t._decorator,s=t.error,a=t.js,c=t.Component},function(t){h=t.GAMIFY_WARNNING},function(t){r=t.Dispatcher}],execute:function(){var o,_=n.ccclass;t("Store",_("Store")(o=function(t){function n(){var e;(e=t.call(this)||this)._instanceIndex=0,e.__ccClassName="",e._dispatchToken=null,e._dispatcher=null,e._changed=!1,e.__ccClassName=a.getClassName(i(e));var n=a.getClassByName(e.__ccClassName);return e._instanceIndex=n.__totalInstances?n.__totalInstances+1:++e._instanceIndex,n.__totalInstances=e._instanceIndex,e}e(n,t);var c=n.prototype;return c.onDestroy=function(){this.removeDispatcher(),this._dispatchToken=null},c.onChanged=function(){},c.getDispatcher=function(){return this._dispatcher||(this._dispatcher=r.instance),this._dispatcher},c.setDispatcher=function(t,e){void 0===e&&(e=!1),t?(t instanceof r||s(!1),this._dispatchToken?e&&(this.removeDispatcher(),this.setDispatcher(t)):(this._dispatcher=t,this._dispatchToken=this._dispatcher.register(this.__generateCallBack.call(this)))):!t&&this._dispatcher&&s(!1)},c.removeDispatcher=function(){this._dispatcher&&this._dispatchToken&&this._dispatcher.unregister(this._dispatchToken),this._dispatchToken=null},c.getDispatchToken=function(){return this._dispatchToken},c.hasChanged=function(){return!this.getDispatcher().isDispatching()&&h&&s(!1),this._changed},c.waitFor=function(t){this.getDispatcher().waitFor([t])},c.__generateCallBack=function(){var t=this;return function(e){t.__invokeOnDispatch(e)}},c.__emitChange=function(){!this.getDispatcher().isDispatching()&&h&&s(!1),this._changed=!0,this.onChanged()},c.__invokeOnDispatch=function(t){this._changed=!1,this.__onDispatch(t)},c.__onDispatch=function(t){s(!1),this.__emitChange()},n}(c))||o)}}}));

System.register("bundle://common/_virtual/TimelineClip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChainClip.ts","./ParasiteComponent.ts"],(function(t){var e,i,s,r,n,o,a,l,u,c,h,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){l=t._decorator,u=t.Enum,c=t.js,h=t.error},function(t){p=t.ChainClip},function(t){f=t.override}],execute:function(){var y,d,m,P,b,g,_,v=l.ccclass,N=l.property,k=(l.executeInEditMode,function(t){return t[t.SEQUENCING=0]="SEQUENCING",t[t.IN_ORDER=1]="IN_ORDER",t}(k||{}));u(k);t("TimelineClip",(y=v("TimelineClip"),d=N({type:k,visible:function(){return this.controller==this}}),m=N({serializable:!0,visible:!1}),P=N({displayName:"Id"}),y((e((g=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,s(e,"_mode",_,r(e)),e._frameId=0,e._currentFrameId=0,e._currentClipName=void 0,e._isLoop=!1,e._isPause=!1,e._isPlaying=!1,e._playList=null,e._currentToken=void 0,e.done=null,e}i(e,t);var l=e.prototype;return l._updateRealtime=function(t){this.isPause||this.super._updateRealtime(t)},l.registerClip=function(e){if(e==this){var i=this.controller._clipNames;this._frameId=i.length}t.prototype.registerClip.call(this,e)},l.play=function(){var t=o(a().mark((function t(e,i){var s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=!1),!(s=this.controller).isPlaying){t.next=9;break}if(!s.isPause){t.next=8;break}return s.resume(),t.abrupt("return");case 8:s.stop();case 9:if(s.isPlaying){t.next=20;break}if(!this.makePlaylist(e)){t.next=19;break}return s.isLoop=i,s.isPlaying=!0,s.isPause=!1,t.next=16,s.progress();case 16:s.setPlaylist(null),t.next=20;break;case 19:h("Can't find out clips with order "+e);case 20:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),l.stop=function(){this._isPlaying=!1,this.done&&this.done(),void 0!==this.sub&&null!==this.sub&&this.sub.stop&&this.sub.stop()},l.resume=function(){this.isPause=!1},l.pause=function(){this.isPause=this.isPlaying&&!0},l.playFrom=function(){var t=o(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mode!=k.SEQUENCING){t.next=13;break}if(e||h("Don't know where to start ! clipName is undefined"),this.isPlaying){t.next=10;break}if(!this.makePlaylist([e,void 0])){t.next=8;break}return this.controller.isPlaying=!0,this.controller.isPause=!1,t.next=8,this.progress();case 8:t.next=11;break;case 10:this.resume();case 11:t.next=14;break;case 13:h("This funtion is not active in "+this.mode+" mode");case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),l.playTo=function(){var t=o(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mode!=k.SEQUENCING){t.next=13;break}if(e||h("Don't know where to stop ! clipName is undefined"),this.isPlaying){t.next=10;break}if(!this.makePlaylist([this.controller.clipName,e])){t.next=8;break}return this.controller.isPlaying=!0,this.controller.isPause=!1,t.next=8,this.progress();case 8:t.next=11;break;case 10:this.resume();case 11:t.next=14;break;case 13:h("This funtion is not active in "+this.mode+" mode");case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),l.progress=function(){var e=o(a().mark((function e(i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=this.controller),!i||!i.isPlaying){e.next=4;break}return e.next=4,t.prototype.progress.call(this,i);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),l.completed=function(){var t=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.controller.isPlaying=!1,this.controller.isLoop=!1;case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.isExecutable=function(){var t=this.isPlaying&&this.isClipInPlayList();if(t){var e=this.controller;e._currentClipName=this.clipName,e._currentFrameId=this.frameId;var i=e.playList.length-1;this.clipName==e.playList[i]?this._isLoop=e.isLoop:this._isLoop=!1}return t},l.nextClip=function(){var t=null;switch(this._mode){case k.IN_ORDER:if(this.playList&&this.playList.length>1&&this.clipName==this.playList[0]){var e=this.playList[1];e&&(t=this.getClipByName(e),this.reducePlaylistInOrderMode())}}return t||this.sub},l.isClipInPlayList=function(){return this.playList&&this.playList.length&&-1!==this.playList.indexOf(this.clipName)&&(this.mode!=k.IN_ORDER||this._playList[0]==this.clipName)},l.setMode=function(t){this._mode=t,this.sub&&this.sub.setMode&&this.sub.setMode(t)},l.setPlaylist=function(t,e){void 0===e&&(e=!1),this._playList=t,!e&&void 0!==this.sub&&null!==this.sub&&this.sub.setPlaylist&&this.sub.setPlaylist(t)},l.reducePlaylistInOrderMode=function(){this.mode==k.IN_ORDER&&this.isClipInPlayList()&&(this.playList.shift(),this.controller.setPlaylist(this.playList))},l.getClipByName=function(t){return this.node.components.find((function(i){return c.isChildClassOf(i.constructor,e)&&i.clipName==t}))},l.makePlaylist=function(t){if(t||c.isNumber(t)){if(Array.isArray(t)&&t.length){var e=this.verifyPlaylist(t);if(!e)return!1;if(e.length>1){if(!e.length)return!1;if(this.mode==k.SEQUENCING){var i=!1,s=this.controller._clipNames;e=s.filter((function(t){var s;return t==e[0]?(i=!i,s=!0,e.shift()):s=i,s}))}return this.controller.setPlaylist(e),!0}if(1==e.length){var r=e[0],n=this.controller._clipNames,o=!1;return e=n.filter((function(t){return t==r&&(o=!0),o})),this.controller.setPlaylist(e),!0}return!1}var a=this.verifyPlaylist([t]);return!!a.length&&(this.controller.setPlaylist(a),!0)}return this.controller.setPlaylist(Array.from(this.controller._clipNames)),!0},l.verifyPlaylist=function(t){var e=this.controller._clipNames,i=[];return t.forEach((function(t,s){if(t||c.isNumber(t)){var r=e.find((function(e,i){return e==t||i==t}));r&&(i[s]=r)}})),i},l.getIdByName=function(t){return this.controller._clipNames.findIndex((function(t,e){return t==t}))},l.onDestroy=function(){t.prototype.onDestroy.call(this),this.done&&this.done(),this.done=null},n(e,[{key:"mode",get:function(){return this._mode},set:function(t){this._mode=t,this.setMode(t)}},{key:"frameId",get:function(){return this._frameId}},{key:"currentFrame",get:function(){return this._currentFrameId}},{key:"currentClipName",get:function(){return this.controller._currentClipName}},{key:"isLoop",get:function(){return this._isLoop},set:function(t){this._isLoop=t,void 0!==this.sub&&null!==this.sub&&(this.sub.isLoop=t)}},{key:"isPause",get:function(){return this._isPause},set:function(t){this._isPause=t,void 0!==this.sub&&null!==this.sub&&(this.sub.isPause=t)}},{key:"isPlaying",get:function(){return this.controller._isPlaying},set:function(t){this._isPlaying=t,void 0!==this.sub&&null!==this.sub&&(this.sub.isPlaying=t)}},{key:"playList",get:function(){return this._playList}}]),e}(p)).prototype,"mode",[d],Object.getOwnPropertyDescriptor(g.prototype,"mode"),g.prototype),_=e(g.prototype,"_mode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.SEQUENCING}}),e(g.prototype,"frameId",[P],Object.getOwnPropertyDescriptor(g.prototype,"frameId"),g.prototype),e(g.prototype,"_updateRealtime",[f],Object.getOwnPropertyDescriptor(g.prototype,"_updateRealtime"),g.prototype),b=g))||b))}}}));

System.register("bundle://common/_virtual/WebSocketComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamifyScenario.ts","./GameUtils.ts"],(function(e){var t,n,o,r,i,c,s,u,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){s=e._decorator,u=e.log},function(e){a=e.GamifyScenario},function(e){l=e.GameUtils}],execute:function(){var f,p,_,h=s.ccclass,b=s.property;e("WebSocketComponent",h("WebSocketComponent")((_=t((p=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,o(t,"isAutoReconnect",_,r(t)),t._client=void 0,t._url=void 0,t._forceToClose=!1,t}n(t,e);var s=t.prototype;return s.connect=function(){var e=i(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._client&&this._client.readyState==WebSocket.OPEN&&this._client.close(),e.next=3,new Promise((function(e){n._url=t||n._url,n._client=new WebSocket(n._url),n._client.onopen=function(n){u("Opened WebSocket !!!"+t),e()},n._client.onmessage=n.onMessage.bind(n,n._client),n._client.onerror=n.onError.bind(n,n._client),n._client.onclose=function(e){u("WebSocket closed !!!"),n.isAutoReconnect&&!n._forceToClose&&n.connect(t),n._forceToClose=!1}}));case 3:return e.abrupt("return",this._client);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.close=function(){var e=i(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._forceToClose=!0,this._client.close(),e.abrupt("return",this._client);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.onMessage=function(e,t){l.setLocalStorageItem("socket_save",JSON.stringify(t))},s.onError=function(e,t){u("WebSocket error !!!")},s.send=function(e){this._client&&this._client.send(e)},t}(a)).prototype,"isAutoReconnect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=p))||f)}}}));

(function(r) {
  r('virtual:///prerequisite-imports/common', 'bundle://common/_virtual/common'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});