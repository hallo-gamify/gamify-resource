System.register("chunks:///_virtual/common",["./LobbyPopup.ts","./PlayerInboxPopup.ts","./PlayerInboxNetwork.ts","./PlayerInboxType.ts","./PlayerInboxButton.ts","./PlayerInboxItem.ts"],(function(){return{setters:[null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/LobbyPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RemoteScriptImporter.ts","./StartActions.ts","./ServiceRequestConfig.ts"],(function(t){var e,n,r,o,i,a,s,c,u,l,p,h,b,d,f,m,y,v,g,L,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,u=t.Color,l=t.SpriteFrame,p=t.sys,h=t.log,b=t.error,d=t.UIOpacity,f=t.Tween,m=t.tween},function(t){y=t.importRemoteCCClass,v=t.remoteCCClass},function(t){g=t.MainGameAction,L=t.API_ACTION},function(t){R=t.ServiceRequestConfig}],execute:function(){var P,w,C,I,U,E,T,k,x;s._RF.push({},"edbd7l362FN0pEREglR0Gq1","LobbyPopup",void 0);c.ccclass;var B=c.property,S=y("GamifyComponent"),N=function(t){return t[t.INIT=0]="INIT",t[t.SETUP_COMPLETED=1]="SETUP_COMPLETED",t}(N||{});t("LobbyPopup",(P=v("LobbyPopup"),w=B({type:u}),C=B({type:l}),I=B({type:R}),P((T=e((E=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"buttonColor",T,o(e)),r(e,"homeIcon",k,o(e)),r(e,"serviceRequest",x,o(e)),e.servieNetworkName=null,e.fillImgWrapper=null,e.lobbyURL=void 0,e}n(e,t);var s=e.prototype;return s.onData=function(t,e){var n,r,o,i,a,s=e.type,c=e.payload;switch(s){case L.AUTH_RESULT:h("auth result");case g.INIT:if(c&&c.apiService&&(this.servieNetworkName=c.apiService),a=this.getAPIData(this.servieNetworkName),t.enableLobby=!p.isMobile&&a&&(null==(n=a)?void 0:n.config)&&("true"===(null==(r=a)||null==(r=r.config)?void 0:r.homeButton)||!0===(null==(o=a)||null==(o=o.config)?void 0:o.homeButton)),t.enableLobby){var u=new URLSearchParams(window.location.search);t.lobbyURL=u.get("redirectUrl"),t.lobbyURL&&this.isURLValid(t.lobbyURL)?(t.lobbyURL=decodeURIComponent(t.lobbyURL),this.lobbyURL=t.lobbyURL,t.status=N.SETUP_COMPLETED):t.status=N.INIT,this.render()}case this.serviceRequest.ResponseAction:a=this.getAPIData(this.servieNetworkName),t.lobbyURL=null==(i=a)||null==(i=i.config)?void 0:i.lobbyURL,this.lobbyURL=t.lobbyURL,t.status=N.SETUP_COMPLETED,this.render()}},s.onRender=function(){var t=i(a().mark((function t(e,n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.status,t.next=t.t0===N.INIT?3:t.t0===N.SETUP_COMPLETED?5:9;break;case 3:return this.serviceRequest.request(),t.abrupt("break",9);case 5:return this.hidePopup(),this.displayHomeButton(),this.setButtonColor(this.buttonColor.toString()),t.abrupt("break",9);case 9:e();case 10:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),s.getAPIData=function(t){if(t){var e=this.getOtherState(t);return e||(b("[Lobby Popup]: Không có hoặc setup nhầm service"),null)}return b("[Lobby Popup] Chưa khai báo service name ! Có thể do StartGameAction.INIT chưa được dispatch."),null},s.isURLValid=function(t){return null!=t&&null!=t&&"#"!=t&&t.length>0},s.showPopup=function(){var t=i(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=!1),n=this.node.getComponent(d)||this.node.addComponent(d),this.node.children.forEach((function(t){t.active=!0})),!e){t.next=9;break}return f.stopAllByTarget(this.node),t.next=7,new Promise((function(t){m(n).set({opacity:0}).to(.4,{opacity:255}).call(t).start()}));case 7:t.next=10;break;case 9:n.opacity=255;case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.hidePopup=function(){var t=i(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=!1),!e){t.next=5;break}return f.stopAllByTarget(this.node),t.next=5,new Promise((function(t){var e=n.node.getComponent(d)||n.node.addComponent(d);m(e).set({opacity:255}).to(.4,{opacity:0}).call(t).start()}));case 5:this.node.children.forEach((function(t){t.active=!1}));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.displayHomeButton=function(){if(this.homeIcon){var t=document.createElement("style");t.innerText=".lobbyBtn{width:60px;height:60px;position:absolute;right:0;top:0;margin-top:20px;margin-right:20px;border-radius:50%;background-color:#763a00;padding:0;border:0;}.lobbyBtn:hover{background-color:#fca14c;}.lobbyBtn:active{background-color:#4b4b4b;}",document.head.appendChild(t),this.fillImgWrapper=document.createElement("button"),this.fillImgWrapper.className="lobbyBtn";var e=document.createElement("img");e.className="lobbyBtnImg",e.src=this.homeIcon.texture.toString(),e.addEventListener("click",this.onHomeButtonPressed.bind(this)),this.fillImgWrapper.appendChild(e),document.body.appendChild(this.fillImgWrapper)}},s.setButtonColor=function(t){if(this.isLobbyEnabled&&this.fillImgWrapper){if(t.match(/[0-9A-Fa-f]{6}/g)){var e=document.createElement("style");e.innerText=".lobbyBtn_1{background-color:"+t+"}",document.head.appendChild(e),this.fillImgWrapper.classList.add("lobbyBtn_1")}else h("Color string is invalid - ",t)}},s.onHomeButtonPressed=function(){var t=i(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.showPopup(!0);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onCancelButtonPressed=function(){var t=i(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hidePopup(!0);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onOKButtonPressed=function(){var t=i(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.hidePopup(!0),this.lobbyURL&&this.isURLValid(this.lobbyURL)?window.location.replace(this.lobbyURL):b("Invalid redirect URL "+this.lobbyURL);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(S)).prototype,"buttonColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),k=e(E.prototype,"homeIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(E.prototype,"serviceRequest",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=E))||U));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInboxButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FloatButton.ts","./SpineClip.ts"],(function(t){var n,o,e,r,i,a,c,s,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.createClass,r=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){a=t.cclegacy,c=t._decorator},function(t){s=t.FloatButton},function(t){p=t.SpineClip}],execute:function(){var u,l,y,f;a._RF.push({},"6ca095XHAlPBbJRPCyiB/mX","PlayerInboxButton",void 0);var h=c.ccclass,m=c.property;t("PlayerInboxButton",(u=h("PlayerInboxButton"),l=m({type:p}),u((n((f=function(t){function n(){for(var n,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return(n=t.call.apply(t,[this].concat(e))||this)._animation=void 0,n}o(n,t);var a=n.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),this.animation||(this.animation=this.getComponent(p))},a.onPress=function(){var n=r(i().mark((function n(o){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.animation.play(1);case 2:t.prototype.onPress.call(this,o);case 3:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),a.onEnable=function(){this.animation.play(0)},e(n,[{key:"animation",get:function(){return this._animation},set:function(t){this._animation=t}}]),n}(s)).prototype,"animation",[l],Object.getOwnPropertyDescriptor(f.prototype,"animation"),f.prototype),y=f))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInboxItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,a,o,s,c,l,h,u,p;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,r=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,c=t.Label,l=t.Eventify,h=t.Component,u=t.Sprite,p=t.Button}],execute:function(){var f,d,v,T,m,g,y,E;o._RF.push({},"f95f6ZLWeVMD4HwlvUWwEZ7","PlayerInboxItem",void 0);var b=s.ccclass,D=s.property;t("PlayerInboxItem",(f=b("PlayerInboxItem"),d=D({type:c}),v=D({type:c}),f(((E=function(t){function r(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"rewardTitle",g,a(e)),n(e,"expireTimeTitle",y,a(e)),e.data=void 0,e._isActive=!0,e}e(r,t);var o=r.prototype;return o.update=function(t){if(this.data&&this.data.claimBefore&&this.isActive){var e=this.data.claimBefore.getTime()-Date.now();this.expireTimeTitle.string=this.convertMsToTime(e),this.isActive=!this.data.isRead&&e>1e3}},o.render=function(t){this.data=t,this.rewardTitle.string=t.count+this.rewardTitle.string},o.onClaimReward=function(t){this.emit(r.EVENT.SELECTED,this.data)},o.updateExpireTime=function(){},o.convertMsToTime=function(t){if(!this.isActive)return"00d:00h:00m:00s";var e=Math.floor(t/1e3),i=Math.floor(e/60),r=Math.floor(i/60),n=Math.floor(r/24);return i%=60,r%=24,(e%=60)<0?"00d:00h:00m:00s":this.padTo2Digits(n)+"d:"+this.padTo2Digits(r)+"h:"+this.padTo2Digits(i)+"m:"+this.padTo2Digits(e)+"s"},o.padTo2Digits=function(t){return t.toString().padStart(2,"0")},o.onDestroy=function(){this.targetOff(this)},i(r,[{key:"isActive",get:function(){return this._isActive},set:function(t){var e=this;this._isActive!==t&&(this.getComponentsInChildren(u).forEach((function(t){return t.grayscale=!e._isActive})),this.getComponentInChildren(p).interactable=this._isActive);this._isActive=t}}]),r}(l(h))).EVENT={SELECTED:"selected_item_event"},g=r((m=E).prototype,"rewardTitle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(m.prototype,"expireTimeTitle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=m))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInboxNetwork.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WebSocketComponent.ts","./StartActions.ts","./PlayerInboxType.ts"],(function(t){var e,r,n,a,o,i,c,s,u;return{setters:[function(t){e=t.inheritsLoose,r=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){a=t.cclegacy,o=t._decorator,i=t.error},function(t){c=t.WebSocketComponent},function(t){s=t.MainGameAction},function(t){u=t.PlayerInboxAction}],execute:function(){var p;a._RF.push({},"5863bfdYRBLcqKaGnj3TxV8","PlayerInboxNetwork",void 0);var h=o.ccclass,l=(o.property,function(t){return t[t.INIT=0]="INIT",t[t.READY=1]="READY",t}(l||{}));t("PlayerInboxNetwork",h("PlayerInboxNetwork")(p=function(t){function a(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).servieNetworkName=null,e}e(a,t);var o=a.prototype;return o.onData=function(t,e){var r=e.type,n=e.payload;switch(r){case s.INIT:n&&n.apiService&&(this.servieNetworkName=n.apiService),this.initNetworkState(t)}},o.onRender=function(){var t=r(n().mark((function t(e,r,a){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r.status,t.next=t.t0===l.INIT?3:6;break;case 3:return t.next=5,this.connect(this._url);case 5:return t.abrupt("break",6);case 6:e&&e();case 7:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),o.initNetworkState=function(){var t=r(n().mark((function t(e){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.servieNetworkName){t.next=2;break}return t.abrupt("return");case 2:r=this.getAPIData(this.servieNetworkName),this._url=r.config.wssURL,e.status=l.INIT,this.render();case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.getStartDateParam=function(t,e){var r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate()).toISOString()},o.getEndDateParam=function(t,e){return(new Date).toISOString()},o.getAPIData=function(t){if(t){var e=this.getOtherState(t);return e||(i("[Lobby Popup]: Không có hoặc setup nhầm service"),null)}return i("[Lobby Popup] Chưa khai báo service name ! Có thể do StartGameAction.INIT chưa được dispatch."),null},o.onMessage=function(e,r){t.prototype.onMessage.call(this,e,r),this.dispatch({type:u.UPDATE_INBOX})},o.onError=function(e,r){t.prototype.onError.call(this,e,r)},a}(c))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInboxPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePopup.ts","./ServiceRequestConfig.ts","./StartActions.ts","./PlayerInboxType.ts","./Helper.ts","./PlayerInboxItem.ts","./RemoteMultilingualTextPackage.ts","./AsyncWaitify.ts"],(function(e){var t,n,r,a,i,o,u,s,c,l,p,d,h,f,m,b,g,y,I,v,S,w,x,P,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.Node,l=e.Prefab,p=e.Label,d=e.js,h=e.warn,f=e.error,m=e.instantiate},function(e){b=e.GamePopup},function(e){g=e.ServiceRequestConfig},function(e){y=e.MainGameAction,I=e.API_ACTION},function(e){v=e.PlayerInboxAction,S=e.PlayerInboxStatus},function(e){w=e.Helper},function(e){x=e.PlayerInboxItem},function(e){P=e.RemoteMultilingualTextPackage},function(e){N=e.AsyncWaitify}],execute:function(){var R,k,E,A,C,_,O,D,T,V,W,B,F,H,L,z,M,U,q,G,X,j,K,Y,J,Q,Z,$,ee,te,ne;u._RF.push({},"fff45zhKsxHAo4VpOtuJGXg","PlayerInboxPopup",void 0);var re=s.ccclass,ae=s.property;e("PlayerInboxPopup",(R=re("PlayerInboxPopup"),k=ae({readonly:!0}),E=ae({type:c,group:"PANEL"}),A=ae({type:c,group:"PANEL"}),C=ae({type:c,group:"PANEL"}),_=ae({type:c,group:"PANEL"}),O=ae({type:c,group:"PANEL"}),D=ae({type:c,group:"PANEL",displayName:"|__ Content"}),T=ae({type:l,group:"ASSETS",displayName:"Item Prefab"}),V=ae({type:P,group:"ASSETS",displayName:"Language Package"}),W=ae({type:c,group:"PANEL",displayName:"|__ Prepaid Panel"}),B=ae({type:c,group:"PANEL",displayName:"|__ CashDrop Panel"}),F=ae({type:p,group:"PANEL",displayName:"|__ Empty Notication"}),H=ae({type:g,group:"NETWORK"}),L=ae({type:g,group:"NETWORK"}),R((M=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"waitForStore",U,a(t)),r(t,"curtain",q,a(t)),r(t,"closeButton",G,a(t)),r(t,"dragButton",X,a(t)),r(t,"continueNotication",j,a(t)),r(t,"playerInboxPanel",K,a(t)),r(t,"inboxContainer",Y,a(t)),r(t,"itemPrefab",J,a(t)),r(t,"languagePackage",Q,a(t)),r(t,"prepaidPanel",Z,a(t)),r(t,"cashDropPanel",$,a(t)),r(t,"emptyNotication",ee,a(t)),r(t,"listingService",te,a(t)),r(t,"claimService",ne,a(t)),t._selectedItemInfo=void 0,t.servieName="APIService",t._continue=void 0,t}n(t,e);var u=t.prototype;return u.allowActionTypes=function(){return[y.INIT,y.SETTING,v.UPDATE_INBOX,v.CLAIM,v.SHOW,v.HIDE]},u.onInit=function(e){var t=this;this.waitForReady().then((function(){t.dispatch({type:v.SHOW,payload:{status:S.SHOW_ICON_VIEW}})}))},u.onStoreRegisted=function(e,t){(this.senderIsMe()&&this.hasOtherState(this.waitForStore)||-1!==t.sender.indexOf(this.waitForStore))&&this.ready()},u.onData=function(e,t){var n=t.type,r=t.payload;switch(n){case y.INIT:r&&r.apiService&&(this.servieName=r.apiService),this.servieName=r.apiService,this.checkAndUpdateClaimmingState(e);break;case y.SETTING:this.implementSettingState(e,t);break;case v.UPDATE_INBOX:e.status=S.SHOW_INBOX_VIEW,this.render(!0),e.status=S.READY;break;case v.SHOW:r&&(d.isNumber(r.status)||r.status)&&(e.status=r.status),this.render();break;case v.HIDE:e.status=S.HIDE_VIEW,this.render();break;case v.CLAIM:r&&(e.status=S.CLAIM,e.claimed||(e.claimed=Object.create(null)),e.claimed.url=r.url,e.claimed.data=r.data),this.render()}},u.onRender=function(){var e=i(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.status,e.next=e.t0===S.SHOW_ICON_VIEW?3:e.t0===S.SHOW_INBOX_VIEW?6:e.t0===S.HIDE_VIEW?11:e.t0===S.CLAIM?12:e.t0===S.SHOW_CONTINUE_VIEW?19:e.t0===S.UPDATE?26:e.t0===S.AUTO_SPIN?29:32;break;case 3:return e.next=5,this.showIconViewRender(n);case 5:return e.abrupt("break",32);case 6:return e.next=8,this.showInboxViewRender(n);case 8:return e.next=10,this.requestInboxStateRender();case 10:case 11:return e.abrupt("break",32);case 12:return e.next=14,this.requestClaimmingStateRender(n);case 14:return e.next=16,this.showIconViewRender(n);case 16:return e.next=18,this.updateAutoSpinSettingRender(n);case 18:return e.abrupt("break",32);case 19:return e.next=21,this.showContinuePopupRender(n);case 21:return e.next=23,this.updateAutoSpinSettingRender(n);case 23:return e.next=25,this.showIconViewRender(n);case 25:return e.abrupt("break",32);case 26:return e.next=28,this.updateAutoSpinSettingRender(n);case 28:return e.abrupt("break",32);case 29:return e.next=31,this.executeSpinStateRender(n);case 31:return e.abrupt("break",32);case 32:t&&t();case 33:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),u.checkAndUpdateClaimmingState=function(e){if(this.servieName){var t=this.getOtherState(this.servieName),n=this.getClaimedRewards(t),r=this.getClaimInfoFromRewardData(n);r&&(e.claimed||(e.claimed=Object.create(null)),e.claimed.data=r||null,e.status=S.SHOW_CONTINUE_VIEW,this.render(!0)),e.status=S.READY}},u.implementSettingState=function(e,t){if(this.senderIsMe()){var n,r;this.isStoreRegisted(this.waitForStore)||h("implementSettingState----------- store "+this.waitForStore+" chua duoc khai tao"),this.waitFor(this.waitForStore);var a=e.claimed;if(a&&a.data&&null!=(n=a.data)&&n.count&&(null==(r=a.data)?void 0:r.count)>0){var i=e.status;e.status=S.AUTO_SPIN,this.render(!0),e.status=i,e.claimed=null}}},u.requestInboxStateRender=function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listingService.request();case 2:return t=e.sent,e.next=5,this.renderInboxList(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.requestClaimmingStateRender=function(){var e=i(o().mark((function e(t){var n,r,a,i,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStoreRegisted(this.waitForStore)){e.next=3;break}return e.next=3,this.waitForReady();case 3:if(a=null==t||null==(n=t.claimed)?void 0:n.url,!((null==t||null==(r=t.claimed)?void 0:r.data)&&a&&a.length)){e.next=16;break}return e.next=8,this.claimService.request([{url:a}]);case 8:if(i=e.sent){e.next=12;break}return f('[PlayerInboxPopup]::checkAndSetupPlayerInboxSetting(...): Do not found state data via "servieName" '),e.abrupt("return");case 12:u=this.getClaimedRewards(i),s=this.getClaimInfoFromRewardData(u),t.claimed||(t.claimed=Object.create(null)),t.claimed.data=s;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.updateAutoSpinSettingRender=function(){var e=i(o().mark((function e(t){var n,r,a,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=null==t||null==(n=t.claimed)?void 0:n.data)){e.next=9;break}if(a=r.count,i=r.betSetting,u=!!a&&a>0,this.isStoreRegisted(this.waitForStore)){e.next=8;break}return e.next=8,this.waitForReady();case 8:this.dispatch({type:y.SETTING,payload:{isUnstoppable:u,autoSpinNumber:a,betConfig:i}});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.executeSpinStateRender=function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStoreRegisted(this.waitForStore)){e.next=3;break}return e.next=3,this.waitForReady();case 3:this.dispatch({type:I.SPIN});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.showContinuePopupRender=function(){var e=i(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.curtain.active=!0,this.playerInboxPanel.active=!1,this.closeButton.active=!1,this.continueNotication.active=!0,this.dragButton.active=!1,e.next=7,new Promise((function(e){n._continue=e}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.showInboxViewRender=function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.curtain.active=!0,this.playerInboxPanel.active=!0,this.closeButton.active=!0,this.continueNotication.active=!1,this.dragButton.active=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.showIconViewRender=function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.curtain.active=!1,this.playerInboxPanel.active=!1,this.closeButton.active=!1,this.continueNotication.active=!1,this.dragButton.active=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.getClaimedRewards=function(e){if(e){var t=w.searchValue(e,"config.playerReward");return Array.isArray(t)&&(t=t.find((function(e){return"CLAIMED"==e.status}))),t}},u.getPlayMode=function(e){var t=null==e?void 0:e.spin;if(t){var n=t.freeSpins||0;return n&&n>0?1:0}return 0},u.getClaimInfoFromRewardData=function(e){if(!e)return null;var t=w.searchValue(e,"id"),n=e.rewardCount||w.searchValue(e,"reward.count")||0,r=w.searchValue(e,"reward.data");r&&(r=d.isString(r)?JSON.parse(r):r);var a=r?w.searchValue(r,"betSetting"):null;return a&&t?{claimId:t,betSetting:a,count:n}:null},u.renderInboxList=function(){var e=i(o().mark((function e(t){var n,r,a,i,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||null==(n=t.config)||!n.playerInbox){e.next=18;break}if(a=null==t||null==(r=t.config)?void 0:r.playerInbox.data,i=w.searchValue(null==t?void 0:t.config,"domain"),u=w.searchValue(null==t?void 0:t.config,"playerToken"),this.emptyNotication&&(this.emptyNotication.node.active=!(a&&a.length)),!a||!a.length){e.next=15;break}if(s=(new Date).getTime(),c=[],a.forEach((function(e,t){var n=d.createMap();n.id=t,n.claimId=w.searchValue(e,"id"),n.module=w.searchValue(e,"module"),n.isRead=!!w.searchValue(e,"isRead"),n.claimBefore=new Date(w.searchValue(e,"claimBefore")),n.claimUrl=i+w.searchValue(e,"claimUrl")+u,n.count=w.searchValue(e,"extraInfo.reward.count"),n.betSetting=w.searchValue(e,"extraInfo.reward.data.betSetting"),c.push(n)})),!c.length){e.next=13;break}return c.sort((function(e,t){var n=new Date(e.claimBefore).getTime(),r=new Date(t.claimBefore).getTime();return n<s&&r<s?0:n<s?1:r<s?-1:n-r})),e.next=13,this.updateInboxHistoryRender(c);case 13:e.next=16;break;case 15:h("Empty Inbox !!!");case 16:e.next=19;break;case 18:h("There is no data for networkState.config.playerInbox");case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.updateInboxHistoryRender=function(){var e=i(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inboxContainer||!this.itemPrefab){e.next=6;break}if(!this.languagePackage){e.next=4;break}return e.next=4,this.languagePackage.waitForReady();case 4:this.inboxContainer.removeAllChildren(),t.forEach((function(e){var t=e.claimId,r=n.inboxContainer.getChildByName(t);r||((r=m(n.itemPrefab)).parent=n.inboxContainer,r.name=t);var a=r.getComponent(x);a.on(x.EVENT.SELECTED,n.onClaimItem.bind(n)),a.render(e)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.onClaimItem=function(){var e=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.claimService?(n={claimId:t.claimId,count:t.count,betSetting:t.betSetting},this.dispatch({type:v.CLAIM,payload:{url:t.claimUrl,data:n}})):f('No service config "claimService"');case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.onPressIconButton=function(e){this.dispatch({type:v.SHOW,payload:{status:S.SHOW_INBOX_VIEW}})},u.onPressCloseButton=function(e){this.dispatch({type:v.SHOW,payload:{status:S.SHOW_ICON_VIEW}})},u.onPressOkButton=function(e){this._continue&&this._continue()},u.getStartDateParam=function(e,t){var n=new Date;return new Date(n.getFullYear(),n.getMonth(),n.getDate()).toISOString()},u.getEndDateParam=function(e,t){return(new Date).toISOString()},u.getCurrentRewardId=function(e,t){return this._selectedItemInfo?this._selectedItemInfo.claimId:void 0},u.getCurrentModule=function(e,t){return this._selectedItemInfo?this._selectedItemInfo.module:void 0},u.getIsFunParam=function(e,t){return"false"},u.getAPIData=function(){var e=this.getOtherState(this.servieName);return e||(f("Không có hoặc setup nhầm service"),null)},t}(N(b)),U=t(M.prototype,"waitForStore",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"PlayButton"}}),q=t(M.prototype,"curtain",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(M.prototype,"closeButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(M.prototype,"dragButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(M.prototype,"continueNotication",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(M.prototype,"playerInboxPanel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(M.prototype,"inboxContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(M.prototype,"itemPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(M.prototype,"languagePackage",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(M.prototype,"prepaidPanel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(M.prototype,"cashDropPanel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(M.prototype,"emptyNotication",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(M.prototype,"listingService",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(M.prototype,"claimService",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=M))||z));u._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInboxType.ts",["cc"],(function(_){var I;return{setters:[function(_){I=_.cclegacy}],execute:function(){I._RF.push({},"76d2e7NglhB1ZQYDUfyA9e9","PlayerInboxType",void 0);_("PlayerInboxStatus",function(_){return _[_.INIT=0]="INIT",_[_.READY=1]="READY",_[_.UPDATE=2]="UPDATE",_[_.SHOW_CONTINUE_VIEW=3]="SHOW_CONTINUE_VIEW",_[_.SHOW_ICON_VIEW=4]="SHOW_ICON_VIEW",_[_.SHOW_INBOX_VIEW=5]="SHOW_INBOX_VIEW",_[_.HIDE_VIEW=6]="HIDE_VIEW",_[_.CLAIM=7]="CLAIM",_[_.AUTO_SPIN=8]="AUTO_SPIN",_}({})),_("PlayerInboxAction",{UPDATE_INBOX:"player_inbox_update_inbox_action",UPDATE_SETTING:"player_inbox_update_setting_action",SHOW:"player_inbox_show_action",HIDE:"player_inbox_hide_action",CLAIM:"player_inbox_claim_action"});I._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/common', 'chunks:///_virtual/common'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});